import{j as f,r as V,a as fe,g as de,u as he,b as ve,f as me,c as pe,d as ge}from"./index-4bf41003.js";import{u as ke}from"./useForm-67b9625c.js";import{g as xe}from"./movies-selectors-8d7ef22a.js";const be="_wrapper_kfp2p_1",Pe="_title_kfp2p_5",U={wrapper:be,title:Pe},X=({title:i,children:n})=>f.jsxs("div",{className:U.wrapper,children:[f.jsx("h4",{className:U.title,children:i}),n]}),je="_list_18nq8_1",Ee="_listItem_18nq8_17",ye="_listItemPoster_18nq8_23",A={list:je,listItem:Ee,listItemPoster:ye},we="http://localhost:4444",Se=({items:i,onDeleteMovie:n})=>{const e=V.useRef(null),t=i.map(({_id:r,title:a,director:l,genre:u,poster:c})=>f.jsxs("li",{className:A.listItem,children:[c&&f.jsx("img",{ref:e,className:A.listItemPoster,src:`${we}/${c}`,alt:`Poster for ${a}`}),"Title: ",a,". Director: ",l,". Genre: ",u,f.jsx("button",{onClick:()=>n(r),children:"Delete"})]},r));return f.jsx("ol",{className:A.list,children:t})};var Q={exports:{}},W={exports:{}},Me=function(i,n,e,t,r,a,l,u){if(!i){var c;if(n===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[e,t,r,a,l,u],s=0;c=new Error(n.replace(/%s/g,function(){return d[s++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Ce=Me;function ee(i){return i&&typeof i=="object"&&"default"in i?i.default:i}var P=V,D=ee(P),_e=fe,Y=ee(Ce);function _(){return(_=Object.assign||function(i){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}return i}).apply(this,arguments)}function te(i,n){return(te=Object.setPrototypeOf||function(e,t){return function(r,a){for(var l=Object.getOwnPropertyNames(a),u=0;u<l.length;u++){var c=l[u],d=Object.getOwnPropertyDescriptor(a,c);d&&d.configurable&&r[c]===void 0&&Object.defineProperty(r,c,d)}}(e,t),e})(i,n)}function ne(i,n){if(i==null)return{};var e,t,r={},a=Object.keys(i);for(t=0;t<a.length;t++)e=a[t],n.indexOf(e)>=0||(r[e]=i[e]);return r}function re(i){return requestAnimationFrame(i)}function Z(i){cancelAnimationFrame(i)}function C(i){var n=i.ownerDocument;return n.hasFocus()&&n.activeElement===i}function ie(i){return i==null?void 0:i.ownerDocument}function Fe(i){var n=function(e){var t;return(t=ie(e))==null?void 0:t.defaultView}(i);return!!n&&i instanceof n.HTMLElement}function R(i){return P.useCallback(function(){var n=i.current,e=typeof window<"u"&&Fe(n);if(!n||!e)return null;if(n.nodeName!=="INPUT"&&(n=n.querySelector("input")),!n)throw new Error("react-input-mask: inputComponent doesn't contain input node");return n},[i])}function Oe(i,n){var e,t,r,a,l=P.useRef({start:null,end:null}),u=R(i),c=P.useCallback(function(){return function(p){var v=p.selectionStart,E=p.selectionEnd;return{start:v,end:E,length:E-v}}(u())},[u]),d=P.useCallback(function(){return l.current},[]),s=P.useCallback(function(p){var v=u();v&&C(v)&&(function(E,S,M){M===void 0&&(M=S),E.setSelectionRange(S,M)}(v,p.start,p.end),l.current=c())},[u,c]),o=P.useCallback(function(){l.current=c()},[c]),h=(e=o,t=P.useRef(null),r=P.useCallback(function(){t.current===null&&function p(){e(),t.current=re(p)}()},[e]),a=P.useCallback(function(){Z(t.current),t.current=null},[]),P.useEffect(function(){t.current&&(a(),r())},[r,a]),P.useEffect(Z,[]),[r,a]),k=h[0],j=h[1];return P.useLayoutEffect(function(){if(n){var p=u();return p.addEventListener("focus",k),p.addEventListener("blur",j),C(p)&&k(),function(){p.removeEventListener("focus",k),p.removeEventListener("blur",j),j()}}}),{getSelection:c,getLastSelection:d,setSelection:s}}function De(i,n){var e=P.useRef(),t=Oe(e,n),r=t.getSelection,a=t.getLastSelection,l=t.setSelection,u=function(o,h){var k=R(o),j=P.useRef(h);return{getValue:P.useCallback(function(){return k().value},[k]),getLastValue:P.useCallback(function(){return j.current},[]),setValue:P.useCallback(function(p){j.current=p;var v=k();v&&(v.value=p)},[k])}}(e,i),c=u.getValue,d=u.getLastValue,s=u.setValue;return{inputRef:e,getInputState:function(){return{value:c(),selection:r()}},getLastInputState:function(){return{value:d(),selection:a()}},setInputState:function(o){var h=o.value,k=o.selection;s(h),l(k)}}}var Ve=["disabled","onBlur","onChange","onFocus","onMouseDown","readOnly","value"],H={9:/[0-9]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/},Ne=function(i){var n=this;this.isCharacterAllowedAtPosition=function(e,t){var r=n.maskOptions.maskPlaceholder;return!!n.isCharacterFillingPosition(e,t)||!!r&&r[t]===e},this.isCharacterFillingPosition=function(e,t){var r=n.maskOptions.mask;if(!e||t>=r.length)return!1;if(!n.isPositionEditable(t))return r[t]===e;var a=r[t];return new RegExp(a).test(e)},this.isPositionEditable=function(e){var t=n.maskOptions,r=t.mask,a=t.permanents;return e<r.length&&a.indexOf(e)===-1},this.isValueEmpty=function(e){return e.split("").every(function(t,r){return!n.isPositionEditable(r)||!n.isCharacterFillingPosition(t,r)})},this.isValueFilled=function(e){return n.getFilledLength(e)===n.maskOptions.lastEditablePosition+1},this.getDefaultSelectionForValue=function(e){var t=n.getFilledLength(e),r=n.getRightEditablePosition(t);return{start:r,end:r}},this.getFilledLength=function(e){return function(t,r){for(var a=t.length-1;a>=0;a--)if(r(t[a],a))return a;return-1}(e.split(""),function(t,r){return n.isPositionEditable(r)&&n.isCharacterFillingPosition(t,r)})+1},this.getStringFillingLengthAtPosition=function(e,t){return e.split("").reduce(function(r,a){return n.insertCharacterAtPosition(r,a,r.length)},function(r,a){a===void 0&&(a=1);for(var l="",u=0;u<a;u++)l+=r;return l}(" ",t)).length-t},this.getLeftEditablePosition=function(e){for(var t=e;t>=0;t--)if(n.isPositionEditable(t))return t;return null},this.getRightEditablePosition=function(e){for(var t=n.maskOptions.mask,r=e;r<t.length;r++)if(n.isPositionEditable(r))return r;return null},this.formatValue=function(e){var t=n.maskOptions,r=t.maskPlaceholder,a=t.mask;if(!r){for(e=n.insertStringAtPosition("",e,0);e.length<a.length&&!n.isPositionEditable(e.length);)e+=a[e.length];return e}return n.insertStringAtPosition(r,e,0)},this.clearRange=function(e,t,r){if(!r)return e;var a=t+r,l=n.maskOptions,u=l.maskPlaceholder,c=l.mask,d=e.split("").map(function(s,o){var h=n.isPositionEditable(o);return!u&&o>=a&&!h?"":o<t||o>=a?s:h?u?u[o]:"":c[o]}).join("");return n.formatValue(d)},this.insertCharacterAtPosition=function(e,t,r){var a=n.maskOptions,l=a.mask,u=a.maskPlaceholder;if(r>=l.length)return e;var c=n.isCharacterAllowedAtPosition(t,r),d=n.isPositionEditable(r),s=n.getRightEditablePosition(r),o=u&&s?t===u[s]:null,h=e.slice(0,r);return!c&&d||(e=h+(c?t:l[r])),c||d||o||(e=n.insertCharacterAtPosition(e,t,r+1)),e},this.insertStringAtPosition=function(e,t,r){var a=n.maskOptions,l=a.mask,u=a.maskPlaceholder;if(!t||r>=l.length)return e;var c=t.split(""),d=n.isValueFilled(e)||!!u,s=e.slice(r);return e=c.reduce(function(o,h){return n.insertCharacterAtPosition(o,h,o.length)},e.slice(0,r)),d?e+=s.slice(e.length-r):n.isValueFilled(e)?e+=l.slice(e.length).join(""):e=s.split("").filter(function(o,h){return n.isPositionEditable(r+h)}).reduce(function(o,h){var k=n.getRightEditablePosition(o.length);return k===null?o:(n.isPositionEditable(o.length)||(o+=l.slice(o.length,k).join("")),n.insertCharacterAtPosition(o,h,o.length))},e),e},this.processChange=function(e,t){var r=n.maskOptions,a=r.mask,l=r.prefix,u=r.lastEditablePosition,c=e.value,d=e.selection,s=t.value,o=t.selection,h=c,k="",j=0,p=0,v=Math.min(o.start,d.start);return d.end>o.start?(k=h.slice(o.start,d.end),p=(j=n.getStringFillingLengthAtPosition(k,v))?o.length:0):h.length<s.length&&(p=s.length-h.length),h=s,p&&(p===1&&!o.length&&(v=o.start===d.start?n.getRightEditablePosition(d.start):n.getLeftEditablePosition(d.start)),h=n.clearRange(h,v,p)),h=n.insertStringAtPosition(h,k,v),(v+=j)>=a.length?v=a.length:v<l.length&&!j?v=l.length:v>=l.length&&v<u&&j&&(v=n.getRightEditablePosition(v)),{value:h=n.formatValue(h),enteredString:k,selection:{start:v,end:v}}},this.maskOptions=function(e){var t=e.mask,r=e.maskPlaceholder,a=[];if(!t)return{maskPlaceholder:null,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};if(typeof t=="string"){var l=!1,u="";t.split("").forEach(function(s){l||s!=="\\"?(!l&&H[s]||a.push(u.length),u+=s,l=!1):l=!0}),t=u.split("").map(function(s,o){return a.indexOf(o)===-1?H[s]:s})}else t.forEach(function(s,o){typeof s=="string"&&a.push(o)});r&&(r=r.length===1?t.map(function(s,o){return a.indexOf(o)!==-1?s:r}):r.split(""),a.forEach(function(s){r[s]=t[s]}),r=r.join(""));for(var c=a.filter(function(s,o){return s===o}).map(function(s){return t[s]}).join(""),d=t.length-1;a.indexOf(d)!==-1;)d--;return{maskPlaceholder:r,prefix:c,mask:t,lastEditablePosition:d,permanents:a}}(i)},Le=["children"],Ae=function(i){var n,e;function t(){return i.apply(this,arguments)||this}return e=i,(n=t).prototype=Object.create(e.prototype),n.prototype.constructor=n,te(n,e),t.prototype.render=function(){var r=this.props,a=r.children,l=ne(r,Le);return D.cloneElement(a,l)},t}(D.Component),Re=["alwaysShowMask","children","mask","maskPlaceholder","beforeMaskedStateChange"],J=P.forwardRef(function(i,n){var e=i.alwaysShowMask,t=i.children,r=i.mask,a=i.maskPlaceholder,l=i.beforeMaskedStateChange,u=ne(i,Re);(function(m){var g=m.mask,x=m.maskPlaceholder;g&&x&&x.length!==1&&x.length!==g.length&&Y(!1)})(i);var c,d,s=new Ne({mask:r,maskPlaceholder:a}),o=!!r,h=!u.disabled&&!u.readOnly,k=i.value!==null&&i.value!==void 0,j=(c=o,d=P.useRef(),P.useEffect(function(){d.current=c}),d.current),p=De(function(m){return""+m}((k?i.value:i.defaultValue)||""),o),v=p.inputRef,E=p.getInputState,S=p.setInputState,M=p.getLastInputState,N=R(v);if(o&&k){var I=N(),L=I&&C(I)||e||i.value?s.formatValue(i.value):i.value;l&&(L=l({nextState:{value:L,selection:{start:null,end:null}}}).value),S(_({},M(),{value:L}))}var G=M(),ae=G.selection,oe=G.value;P.useLayoutEffect(function(){if(o){var m=C(N()),g=ae,x=E(),b=_({},x);if(!k){var y=x.value,F=s.formatValue(y),O=s.isValueEmpty(F);!O||m||e?b.value=F:O&&!m&&(b.value="")}m&&!j?b.selection=s.getDefaultSelectionForValue(b.value):k&&m&&g&&g.start!==null&&g.end!==null&&(b.selection=g),l&&(b=l({currentState:x,nextState:b})),S(b)}});var T=_({},u,{onFocus:function(m){v.current=m.target;var g=E().value;if(o&&!s.isValueFilled(g)){var x=s.formatValue(g),b=s.getDefaultSelectionForValue(x),y={value:x,selection:b};l&&(x=(y=l({currentState:E(),nextState:y})).value,b=y.selection),S(y),x!==g&&i.onChange&&i.onChange(m),re(function(){S(M())})}i.onFocus&&i.onFocus(m)},onBlur:function(m){var g=E().value,x=M().value;if(o&&!e&&s.isValueEmpty(x)){var b="",y={value:b,selection:{start:null,end:null}};l&&(b=(y=l({currentState:E(),nextState:y})).value),S(y),b!==g&&i.onChange&&i.onChange(m)}i.onBlur&&i.onBlur(m)},onChange:o&&h?function(m){var g=E(),x=M(),b=s.processChange(g,x);l&&(b=l({currentState:g,previousState:x,nextState:b})),S(b),i.onChange&&i.onChange(m)}:i.onChange,onMouseDown:o&&h?function(m){var g=N(),x=E().value,b=ie(g);if(!C(g)&&!s.isValueFilled(x)){var y=m.clientX,F=m.clientY,O=new Date().getTime();b.addEventListener("mouseup",function se(B){if(b.removeEventListener("mouseup",se),C(g)){var le=Math.abs(B.clientX-y),ue=Math.abs(B.clientY-F),$=Math.max(le,ue),q=new Date().getTime()-O;if($<=10&&q<=200||$<=5&&q<=300){var z=M(),ce=_({},z,{selection:s.getDefaultSelectionForValue(z.value)});S(ce)}}})}i.onMouseDown&&i.onMouseDown(m)}:i.onMouseDown,ref:function(m){v.current=_e.findDOMNode(m),function(g){return typeof g=="function"}(n)?n(m):n!==null&&typeof n=="object"&&(n.current=m)},value:o&&k?oe:i.value});return t?(function(m,g){Ve.filter(function(x){return g.props[x]!=null&&g.props[x]!==m[x]}).length&&Y(!1)}(i,t),D.createElement(Ae,T,t)):D.createElement("input",T)});J.defaultProps={alwaysShowMask:!1,maskPlaceholder:"_"},W.exports=J;var Ie=W.exports;Q.exports=Ie;var Ge=Q.exports;const Te=de(Ge),Be={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:""},$e="_form_izw27_1",qe="_formGroup_izw27_7",ze="_textField_izw27_15",Ue="_checkbox_izw27_19",w={form:$e,formGroup:qe,textField:ze,checkbox:Ue},Xe=({onSubmit:i})=>{const{state:n,handleChange:e,reset:t}=ke({initialState:Be,onSubmit:i}),r=V.useRef(null),a=s=>{s.preventDefault();const o=new FormData(s.currentTarget);o.set("favorite",n.favorite),i(o),t()},{title:l,director:u,favorite:c,releaseDate:d}=n;return f.jsxs("form",{onSubmit:a,className:w.form,encType:"multipart/form-data",children:[f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Movie title"}),f.jsx("input",{value:l,name:"title",onChange:e,className:w.textField,placeholder:"Movie title",required:!0})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Movie director"}),f.jsx("input",{value:u,name:"director",onChange:e,className:w.textField,placeholder:"Movie director",required:!0})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Favorite"}),f.jsx("input",{checked:c,name:"favorite",onChange:e,className:w.checkbox,type:"checkbox"})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Movie genre"}),f.jsxs("select",{name:"genre",onChange:e,children:[f.jsx("option",{value:"fantastic",children:"Fantastic"}),f.jsx("option",{value:"love story",children:"Love story"})]})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Movie release date"}),f.jsx(Te,{ref:r,value:d,name:"releaseDate",mask:"9999",onChange:e,className:w.textField,placeholder:"Book date",required:!0})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Poster"}),f.jsx("input",{name:"poster",type:"file"})]}),f.jsx("button",{type:"submit",children:"Add movie"})]})},Ye="_wrapper_j8hu4_1",Ze="_title_j8hu4_5",He="_blocks_j8hu4_12",K={wrapper:Ye,title:Ze,blocks:He},Je=()=>{const i=he(xe),n=ve();V.useEffect(()=>{n(me())},[n]);const e=r=>{n(pe(r))},t=r=>{n(ge(r))};return f.jsx("div",{className:K.wrapper,children:f.jsxs("div",{className:K.blocks,children:[f.jsx(X,{title:"Add movie",children:f.jsx(Xe,{onSubmit:e})}),f.jsx(X,{title:"Movie list",children:f.jsx(Se,{items:i,onDeleteMovie:t})})]})})},et=()=>f.jsxs("div",{className:"container",children:[f.jsx("h1",{className:"page-title",children:"My movies page"}),f.jsx(Je,{})]});export{et as default};
