import{r as u,u as y,j as e,a as T,b as C,f as E,c as F,d as $}from"./index-787e1b22.js";import{i as g,E as A,s as t,M as D,g as P,a as k}from"./movies-selectors-40d96af7.js";import{u as w,T as I}from"./useForm-8c02a012.js";const G="_list_1io6v_1",S="_listItem_1io6v_10",U="_posterWrapper_1io6v_22",q="_listItemPoster_1io6v_34",R="_listItemInfo_1io6v_46",Y="_like_1io6v_60",B="_likeActive_1io6v_70",W="_video_1io6v_75",L="_button_1io6v_92",O="_btnEdit_1io6v_115",s={list:G,listItem:S,posterWrapper:U,listItemPoster:q,listItemInfo:R,like:Y,likeActive:B,video:W,button:L,btnEdit:O},V="http://localhost:4444",z="ba520957137ad46ba4502dabb5237445",H=({items:a,onDeleteMovie:o})=>{const i=u.useRef(null),c=y(),[r,m]=u.useState(!1),[p,x]=u.useState(""),j=(l,n)=>{c(T({id:l,favorite:!n}))},f=l=>{const d=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${encodeURIComponent(l)}&key=${z}`;console.log(d),x(d),m(!0)},v=()=>{m(!1)},h=a.map(({_id:l,title:n,director:d,genre:M,poster:b,releaseDate:N,favorite:_})=>e.jsxs("li",{className:s.listItem,children:[b&&e.jsx("div",{className:s.posterWrapper,children:e.jsx("img",{ref:i,className:s.listItemPoster,src:`${V}/${b}`,alt:`Poster for ${n}`})}),e.jsxs("div",{className:s.listItemInfo,children:[e.jsxs("h2",{children:["Назва: ",n]}),e.jsxs("span",{children:["Director: ",d]}),e.jsxs("span",{children:["Genre: ",M]}),e.jsxs("span",{children:["Release: ",N]})]}),e.jsx("button",{children:e.jsx("svg",{onClick:()=>j(l,_),className:`${s.like} ${_?s.likeActive:""}`,children:e.jsx("use",{href:`${g}#icon-heart`})})}),e.jsx("button",{onClick:()=>f(l),children:e.jsx("svg",{className:s.video,children:e.jsx("use",{href:`${g}#icon-video`})})}),e.jsx("button",{className:s.button,onClick:()=>o(l),children:"Delete"}),e.jsx(A,{movie:{_id:l,title:n,director:d,genre:M,poster:b,releaseDate:N,favorite:_},className:s.btnEdit})]},l));return e.jsxs("div",{children:[e.jsx("ol",{className:s.list,children:h}),r&&e.jsx("div",{className:s.modal,children:e.jsxs("div",{className:s.modalContent,children:[e.jsx("button",{className:s.close,onClick:v,children:"×"}),e.jsx("iframe",{width:"560",height:"315",src:p,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Trailer"})]})})]})},J={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:"",poster:null},K=({onSubmit:a})=>{const{state:o,handleChange:i,reset:c}=w({initialState:J,onSubmit:a}),r=v=>{v.preventDefault();const h=new FormData(v.currentTarget);h.set("favorite",o.favorite),a(h),c()},{title:m,director:p,favorite:x,releaseDate:j}=o,f=[/\d/,/\d/,/\d/,/\d/];return e.jsxs("form",{onSubmit:r,className:t.form,encType:"multipart/form-data",children:[e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Movie title"}),e.jsx("input",{value:m,name:"title",onChange:i,className:t.textField,placeholder:"Movie title",required:!0})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Movie director"}),e.jsx("input",{value:p,name:"director",onChange:i,className:t.textField,placeholder:"Movie director",required:!0})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Favorite"}),e.jsx("input",{checked:x,name:"favorite",onChange:i,className:t.checkbox,type:"checkbox"})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Movie genre"}),e.jsxs("select",{name:"genre",onChange:i,children:[e.jsx("option",{value:"fantastic",children:"Fantastic"}),e.jsx("option",{value:"love story",children:"Love story"})]})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Movie release date"}),e.jsx(D,{mask:f,value:j,name:"releaseDate",onChange:i,className:t.textField,placeholder:"YYYY",required:!0})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Poster"}),e.jsx("input",{name:"poster",type:"file"})]}),e.jsx("button",{className:t.btn,type:"submit",children:"Add movie"})]})},Q="_title_xta3q_1",X="_blocks_xta3q_8",Z={title:Q,blocks:X},ee=()=>{const a=C(P),o=y();u.useEffect(()=>{o(E())},[o]);const i=r=>{o(F(r))},c=r=>{o($(r))};return e.jsx("div",{children:e.jsxs("div",{className:Z.blocks,children:[e.jsx(k,{title:"Add movie",children:e.jsx(K,{onSubmit:i})}),e.jsx(k,{title:"Movie list",children:a.length>0?e.jsx(H,{items:a,onDeleteMovie:c}):e.jsx(I,{children:"No movies have been added yet"})})]})})},ie=()=>e.jsxs("div",{children:[e.jsx(I,{children:"My movies page"}),e.jsx(ee,{})]});export{ie as default};
