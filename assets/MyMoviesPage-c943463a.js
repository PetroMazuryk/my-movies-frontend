import{r as se,a as he,j as e,c as me,g as ve,u as ce,b as ye,d as ge,f as xe,e as be,h as ke}from"./index-244c16b2.js";import{g as je,M as le}from"./movies-selectors-8a8fb7a6.js";import{u as de}from"./useForm-03c78eb0.js";const _e="_list_1oksl_1",Ce="_listItem_1oksl_10",Me="_posterWrapper_1oksl_27",Ne="_listItemPoster_1oksl_39",Oe="_listItemInfo_1oksl_51",Te="_button_1oksl_65",Pe="_btnEdit_1oksl_88",re={list:_e,listItem:Ce,posterWrapper:Me,listItemPoster:Ne,listItemInfo:Oe,button:Te,btnEdit:Pe},we="_overlay_nd52g_1",Ee="_modal_nd52g_14",Se="_close_nd52g_22",ie={overlay:we,modal:Ee,close:Se},Ie=document.getElementById("modal-root"),De=({close:O,title:E,content:T,actions:c})=>{const r=({target:o,currentTarget:s,code:d})=>{(o===s||d==="Escape")&&O()};return se.useEffect(()=>{const o=s=>r(s);return document.body.addEventListener("keydown",o),()=>document.body.removeEventListener("keydown",o)},[]),he.createPortal(e.jsx("div",{onClick:r,className:ie.overlay,children:e.jsxs("div",{className:ie.modal,children:[e.jsx("span",{onClick:O,className:ie.close,children:"X"}),E&&e.jsx("h2",{children:E}),T&&e.jsx("div",{children:T}),c&&e.jsx("div",{className:ie.actions,children:c})]})}),Ie)};var fe={exports:{}};(function(O,E){(function(T,c){O.exports=c(se)})(me,function(T){return function(c){function r(s){if(o[s])return o[s].exports;var d=o[s]={exports:{},id:s,loaded:!1};return c[s].call(d.exports,d,d.exports,r),d.loaded=!0,d.exports}var o={};return r.m=c,r.c=o,r.p="",r(0)}([function(c,r,o){function s(u){return u&&u.__esModule?u:{default:u}}function d(u,t){var n={};for(var a in u)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(u,a)&&(n[a]=u[a]);return n}function m(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}function p(u,t){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?u:t}function b(u,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);u.prototype=Object.create(t&&t.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(u,t):u.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.conformToMask=void 0;var y=Object.assign||function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(u[a]=n[a])}return u},g=function(){function u(t,n){for(var a=0;a<n.length;a++){var v=n[a];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(t,v.key,v)}}return function(t,n,a){return n&&u(t.prototype,n),a&&u(t,a),t}}(),C=o(3);Object.defineProperty(r,"conformToMask",{enumerable:!0,get:function(){return s(C).default}});var j=o(11),l=s(j),x=o(9),i=s(x),N=o(5),Y=s(N),w=o(2),B=function(u){function t(){var n;m(this,t);for(var a=arguments.length,v=Array(a),h=0;h<a;h++)v[h]=arguments[h];var f=p(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(v)));return f.setRef=f.setRef.bind(f),f.onBlur=f.onBlur.bind(f),f.onChange=f.onChange.bind(f),f}return b(t,u),g(t,[{key:"setRef",value:function(n){this.inputElement=n}},{key:"initTextMask",value:function(){var n=this.props,a=this.props.value;this.textMaskInputElement=(0,Y.default)(y({inputElement:this.inputElement},n)),this.textMaskInputElement.update(a)}},{key:"componentDidMount",value:function(){this.initTextMask()}},{key:"componentDidUpdate",value:function(n){var a=this.props,v=a.value,h=a.pipe,f=a.mask,J=a.guide,R=a.placeholderChar,L=a.showMask,M={guide:J,placeholderChar:R,showMask:L},$=typeof h=="function"&&typeof n.pipe=="function"?h.toString()!==n.pipe.toString():(0,w.isNil)(h)&&!(0,w.isNil)(n.pipe)||!(0,w.isNil)(h)&&(0,w.isNil)(n.pipe),D=f.toString()!==n.mask.toString(),G=Object.keys(M).some(function(P){return M[P]!==n[P]})||D||$,A=v!==this.inputElement.value;(A||G)&&this.initTextMask()}},{key:"render",value:function(){var a=this.props,v=a.render,h=d(a,["render"]);return delete h.mask,delete h.guide,delete h.pipe,delete h.placeholderChar,delete h.keepCharPositions,delete h.value,delete h.onBlur,delete h.onChange,delete h.showMask,v(this.setRef,y({onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value},h))}},{key:"onChange",value:function(n){this.textMaskInputElement.update(),typeof this.props.onChange=="function"&&this.props.onChange(n)}},{key:"onBlur",value:function(n){typeof this.props.onBlur=="function"&&this.props.onBlur(n)}}]),t}(l.default.PureComponent);r.default=B,B.propTypes={mask:i.default.oneOfType([i.default.array,i.default.func,i.default.bool,i.default.shape({mask:i.default.oneOfType([i.default.array,i.default.func]),pipe:i.default.func})]).isRequired,guide:i.default.bool,value:i.default.oneOfType([i.default.string,i.default.number]),pipe:i.default.func,placeholderChar:i.default.string,keepCharPositions:i.default.bool,showMask:i.default.bool},B.defaultProps={render:function(u,t){return l.default.createElement("input",y({ref:u},t))}}},function(c,r){Object.defineProperty(r,"__esModule",{value:!0}),r.placeholderChar="_",r.strFunction="function"},function(c,r,o){function s(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.placeholderChar;if(!d(l))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(l.indexOf(x)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(x)+`

`)+("The mask that was received is: "+JSON.stringify(l)));return l.map(function(i){return i instanceof RegExp?x:i}).join("")}function d(l){return Array.isArray&&Array.isArray(l)||l instanceof Array}function m(l){return typeof l=="string"||l instanceof String}function p(l){return typeof l=="number"&&l.length===void 0&&!isNaN(l)}function b(l){return typeof l>"u"||l===null}function y(l){for(var x=[],i=void 0;i=l.indexOf(j),i!==-1;)x.push(i),l.splice(i,1);return{maskWithoutCaretTraps:l,indexes:x}}Object.defineProperty(r,"__esModule",{value:!0}),r.convertMaskToPlaceholder=s,r.isArray=d,r.isString=m,r.isNumber=p,r.isNil=b,r.processCaretTraps=y;var g=o(1),C=[],j="[]"},function(c,r,o){function s(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,m.isArray)(C)){if((typeof C>"u"?"undefined":d(C))!==p.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");C=C(g,j),C=(0,m.processCaretTraps)(C).maskWithoutCaretTraps}var l=j.guide,x=l===void 0||l,i=j.previousConformedValue,N=i===void 0?y:i,Y=j.placeholderChar,w=Y===void 0?p.placeholderChar:Y,B=j.placeholder,u=B===void 0?(0,m.convertMaskToPlaceholder)(C,w):B,t=j.currentCaretPosition,n=j.keepCharPositions,a=x===!1&&N!==void 0,v=g.length,h=N.length,f=u.length,J=C.length,R=v-h,L=R>0,M=t+(L?-R:0),$=M+Math.abs(R);if(n===!0&&!L){for(var D=y,G=M;G<$;G++)u[G]===w&&(D+=w);g=g.slice(0,M)+D+g.slice(M,v)}for(var A=g.split(y).map(function(W,U){return{char:W,isNew:U>=M&&U<$}}),P=v-1;P>=0;P--){var _=A[P].char;if(_!==w){var X=P>=M&&h===J;_===u[X?P-R:P]&&A.splice(P,1)}}var V=y,z=!1;e:for(var K=0;K<f;K++){var ee=u[K];if(ee===w){if(A.length>0)for(;A.length>0;){var te=A.shift(),Q=te.char,oe=te.isNew;if(Q===w&&a!==!0){V+=w;continue e}if(C[K].test(Q)){if(n===!0&&oe!==!1&&N!==y&&x!==!1&&L){for(var ne=A.length,Z=null,q=0;q<ne;q++){var H=A[q];if(H.char!==w&&H.isNew===!1)break;if(H.char===w){Z=q;break}}Z!==null?(V+=Q,A.splice(Z,1)):K--}else V+=Q;continue e}z=!0}a===!1&&(V+=u.substr(K,f));break}V+=ee}if(a&&L===!1){for(var F=null,S=0;S<V.length;S++)u[S]===w&&(F=S);V=F!==null?V.substr(0,F+1):y}return{conformedValue:V,meta:{someCharsRejected:z}}}Object.defineProperty(r,"__esModule",{value:!0});var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g};r.default=s;var m=o(2),p=o(1),b=[],y=""},function(c,r){function o(m){var p=m.previousConformedValue,b=p===void 0?d:p,y=m.previousPlaceholder,g=y===void 0?d:y,C=m.currentCaretPosition,j=C===void 0?0:C,l=m.conformedValue,x=m.rawValue,i=m.placeholderChar,N=m.placeholder,Y=m.indexesOfPipedChars,w=Y===void 0?s:Y,B=m.caretTrapIndexes,u=B===void 0?s:B;if(j===0||!x.length)return 0;var t=x.length,n=b.length,a=N.length,v=l.length,h=t-n,f=h>0,J=n===0,R=h>1&&!f&&!J;if(R)return j;var L=f&&(b===l||l===N),M=0,$=void 0,D=void 0;if(L)M=j-h;else{var G=l.toLowerCase(),A=x.toLowerCase(),P=A.substr(0,j).split(d),_=P.filter(function(I){return G.indexOf(I)!==-1});D=_[_.length-1];var X=g.substr(0,_.length).split(d).filter(function(I){return I!==i}).length,V=N.substr(0,_.length).split(d).filter(function(I){return I!==i}).length,z=V!==X,K=g[_.length-1]!==void 0&&N[_.length-2]!==void 0&&g[_.length-1]!==i&&g[_.length-1]!==N[_.length-1]&&g[_.length-1]===N[_.length-2];!f&&(z||K)&&X>0&&N.indexOf(D)>-1&&x[j]!==void 0&&($=!0,D=x[j]);for(var ee=w.map(function(I){return G[I]}),te=ee.filter(function(I){return I===D}).length,Q=_.filter(function(I){return I===D}).length,oe=N.substr(0,N.indexOf(i)).split(d).filter(function(I,ae){return I===D&&x[ae]!==I}).length,ne=oe+Q+te+($?1:0),Z=0,q=0;q<v;q++){var H=G[q];if(M=q+1,H===D&&Z++,Z>=ne)break}}if(f){for(var F=M,S=M;S<=a;S++)if(N[S]===i&&(F=S),N[S]===i||u.indexOf(S)!==-1||S===a)return F}else if($){for(var W=M-1;W>=0;W--)if(l[W]===D||u.indexOf(W)!==-1||W===0)return W}else for(var U=M;U>=0;U--)if(N[U-1]===i||u.indexOf(U)!==-1||U===0)return U}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var s=[],d=""},function(c,r,o){function s(t){return t&&t.__esModule?t:{default:t}}function d(t){var n={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:n,update:function(a){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,h=v.inputElement,f=v.mask,J=v.guide,R=v.pipe,L=v.placeholderChar,M=L===void 0?i.placeholderChar:L,$=v.keepCharPositions,D=$!==void 0&&$,G=v.showMask,A=G!==void 0&&G;if(typeof a>"u"&&(a=h.value),a!==n.previousConformedValue){(typeof f>"u"?"undefined":y(f))===w&&f.pipe!==void 0&&f.mask!==void 0&&(R=f.pipe,f=f.mask);var P=void 0,_=void 0;if(f instanceof Array&&(P=(0,x.convertMaskToPlaceholder)(f,M)),f!==!1){var X=p(a),V=h.selectionEnd,z=n.previousConformedValue,K=n.previousPlaceholder,ee=void 0;if((typeof f>"u"?"undefined":y(f))===i.strFunction){if(_=f(X,{currentCaretPosition:V,previousConformedValue:z,placeholderChar:M}),_===!1)return;var te=(0,x.processCaretTraps)(_),Q=te.maskWithoutCaretTraps,oe=te.indexes;_=Q,ee=oe,P=(0,x.convertMaskToPlaceholder)(_,M)}else _=f;var ne={previousConformedValue:z,guide:J,placeholderChar:M,pipe:R,placeholder:P,currentCaretPosition:V,keepCharPositions:D},Z=(0,l.default)(X,_,ne),q=Z.conformedValue,H=(typeof R>"u"?"undefined":y(R))===i.strFunction,F={};H&&(F=R(q,b({rawValue:X},ne)),F===!1?F={value:z,rejected:!0}:(0,x.isString)(F)&&(F={value:F}));var S=H?F.value:q,W=(0,C.default)({previousConformedValue:z,previousPlaceholder:K,conformedValue:S,placeholder:P,rawValue:X,currentCaretPosition:V,placeholderChar:M,indexesOfPipedChars:F.indexesOfPipedChars,caretTrapIndexes:ee}),U=S===P&&W===0,I=A?P:N,ae=U?I:S;n.previousConformedValue=ae,n.previousPlaceholder=P,h.value!==ae&&(h.value=ae,m(h,W))}}}}}function m(t,n){document.activeElement===t&&(B?u(function(){return t.setSelectionRange(n,n,Y)},0):t.setSelectionRange(n,n,Y))}function p(t){if((0,x.isString)(t))return t;if((0,x.isNumber)(t))return String(t);if(t==null)return N;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(t))}Object.defineProperty(r,"__esModule",{value:!0});var b=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(t[v]=a[v])}return t},y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.default=d;var g=o(4),C=s(g),j=o(3),l=s(j),x=o(2),i=o(1),N="",Y="none",w="object",B=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),u=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout},function(c,r){function o(d){return function(){return d}}var s=function(){};s.thatReturns=o,s.thatReturnsFalse=o(!1),s.thatReturnsTrue=o(!0),s.thatReturnsNull=o(null),s.thatReturnsThis=function(){return this},s.thatReturnsArgument=function(d){return d},c.exports=s},function(c,r,o){function s(d,m,p,b,y,g,C,j){if(!d){var l;if(m===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[p,b,y,g,C,j],i=0;l=new Error(m.replace(/%s/g,function(){return x[i++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}c.exports=s},function(c,r,o){var s=o(6),d=o(7),m=o(10);c.exports=function(){function p(g,C,j,l,x,i){i!==m&&d(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function b(){return p}p.isRequired=p;var y={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:b,element:p,instanceOf:b,node:p,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return y.checkPropTypes=s,y.PropTypes=y,y}},function(c,r,o){c.exports=o(8)()},function(c,r){var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";c.exports=o},function(c,r){c.exports=T}])})})(fe);var Ve=fe.exports;const pe=ve(Ve),Fe="_form_evz1p_1",Re="_formGroup_evz1p_11",Ae="_textField_evz1p_25",Ge="_checkbox_evz1p_40",qe="_btn_evz1p_57",k={form:Fe,formGroup:Re,textField:Ae,checkbox:Ge,btn:qe},Be=({onSubmit:O,initialState:E})=>{const{state:T,handleChange:c,handleSubmit:r}=de({initialState:E,onSubmit:O}),{title:o,director:s,favorite:d,genre:m,releaseDate:p}=T,b=[/\d/,/\d/,/\d/,/\d/];return e.jsxs("form",{onSubmit:r,className:k.form,encType:"multipart/form-data",children:[e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Movie title"}),e.jsx("input",{value:o||"",name:"title",onChange:c,className:k.textField,placeholder:"Movie title",required:!0})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Movie director"}),e.jsx("input",{value:s||"",name:"director",onChange:c,className:k.textField,placeholder:"Movie director",required:!0})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Favorite"}),e.jsx("input",{checked:!!d,name:"favorite",onChange:c,className:k.checkbox,type:"checkbox"})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Movie genre"}),e.jsxs("select",{name:"genre",value:m||"fantastic",onChange:c,className:k.textField,children:[e.jsx("option",{value:"fantastic",children:"Fantastic"}),e.jsx("option",{value:"love story",children:"Love story"})]})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Movie release date"}),e.jsx(pe,{mask:b,value:p||"",name:"releaseDate",onChange:c,className:k.textField,placeholder:"YYYY",required:!0})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Poster"}),e.jsx("input",{name:"poster",type:"file",onChange:c})]}),e.jsx("button",{className:k.btn,type:"submit",children:"Edit Movie"})]})},Le=({movie:O})=>{const[E,T]=se.useState(!1),c=ce(),r=()=>T(!0),o=()=>T(!1),s=d=>{c(ye({id:O._id,data:d})),o()};return e.jsxs("div",{children:[e.jsx("button",{onClick:r,children:"Edit"}),E&&e.jsx(De,{close:o,title:"Edit Movie",content:e.jsx(Be,{initialState:{title:O.title,director:O.director,favorite:O.favorite,genre:O.genre,releaseDate:O.releaseDate,poster:null},onSubmit:s})})]})},$e="http://localhost:4444",We=({items:O,onDeleteMovie:E})=>{const T=se.useRef(null),c=O.map(({_id:r,title:o,director:s,genre:d,poster:m,releaseDate:p,favorite:b})=>e.jsxs("li",{className:re.listItem,children:[m&&e.jsx("div",{className:re.posterWrapper,children:e.jsx("img",{ref:T,className:re.listItemPoster,src:`${$e}/${m}`,alt:`Poster for ${o}`})}),e.jsxs("div",{className:re.listItemInfo,children:[e.jsxs("h2",{children:["Назва: ",o]}),e.jsxs("span",{children:["Director: ",s]}),e.jsxs("span",{children:["Genre: ",d]}),e.jsxs("span",{children:["Release: ",p]})]}),e.jsx("button",{className:re.button,onClick:()=>E(r),children:"Delete"}),e.jsx("button",{className:re.btnEdit,children:"Edit"}),e.jsx(Le,{movie:{_id:r,title:o,director:s,genre:d,poster:m,releaseDate:p,favorite:b}})]},r));return e.jsx("ol",{className:re.list,children:c})},Ue={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:"",poster:null},Ye=({onSubmit:O})=>{const{state:E,handleChange:T,reset:c}=de({initialState:Ue,onSubmit:O}),r=b=>{b.preventDefault();const y=new FormData(b.currentTarget);y.set("favorite",E.favorite),O(y),c()},{title:o,director:s,favorite:d,releaseDate:m}=E,p=[/\d/,/\d/,/\d/,/\d/];return e.jsxs("form",{onSubmit:r,className:k.form,encType:"multipart/form-data",children:[e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Movie title"}),e.jsx("input",{value:o,name:"title",onChange:T,className:k.textField,placeholder:"Movie title",required:!0})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Movie director"}),e.jsx("input",{value:s,name:"director",onChange:T,className:k.textField,placeholder:"Movie director",required:!0})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Favorite"}),e.jsx("input",{checked:d,name:"favorite",onChange:T,className:k.checkbox,type:"checkbox"})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Movie genre"}),e.jsxs("select",{name:"genre",onChange:T,children:[e.jsx("option",{value:"fantastic",children:"Fantastic"}),e.jsx("option",{value:"love story",children:"Love story"})]})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Movie release date"}),e.jsx(pe,{mask:p,value:m,name:"releaseDate",onChange:T,className:k.textField,placeholder:"YYYY",required:!0})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{children:"Poster"}),e.jsx("input",{name:"poster",type:"file"})]}),e.jsx("button",{className:k.btn,type:"submit",children:"Add movie"})]})},Ke="_wrapper_2saq2_1",Xe="_title_2saq2_5",ze="_blocks_2saq2_12",ue={wrapper:Ke,title:Xe,blocks:ze},Qe=()=>{const O=ge(je),E=ce();se.useEffect(()=>{E(xe())},[E]);const T=r=>{E(be(r))},c=r=>{E(ke(r))};return e.jsx("div",{className:ue.wrapper,children:e.jsxs("div",{className:ue.blocks,children:[e.jsx(le,{title:"Add movie",children:e.jsx(Ye,{onSubmit:T})}),e.jsx(le,{title:"Movie list",children:e.jsx(We,{items:O,onDeleteMovie:c})})]})})},et=()=>e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"page-title",children:"My movies page"}),e.jsx(Qe,{})]});export{et as default};
