import{r as f,u as _,j as e,a as g,b as M,f as N,c as k,d as I}from"./index-c5707be1.js";import{i as u,E as y,s,M as E,g as F,a as p}from"./movies-selectors-35d9feab.js";import{u as D,T as b}from"./useForm-629ddc29.js";const $="_list_j4gxd_1",A="_listItem_j4gxd_10",C="_posterWrapper_j4gxd_22",P="_listItemPoster_j4gxd_34",G="_listItemInfo_j4gxd_46",T="_like_j4gxd_60",q="_likeActive_j4gxd_70",R="_video_j4gxd_75",S="_button_j4gxd_83",W="_btnEdit_j4gxd_106",t={list:$,listItem:A,posterWrapper:C,listItemPoster:P,listItemInfo:G,like:T,likeActive:q,video:R,button:S,btnEdit:W},Y="http://localhost:4444",L=({items:a,onDeleteMovie:i})=>{const o=f.useRef(null),d=_(),n=(l,r)=>{d(g({id:l,favorite:!r}))},v=a.map(({_id:l,title:r,director:x,genre:h,poster:c,releaseDate:m,favorite:j})=>e.jsxs("li",{className:t.listItem,children:[c&&e.jsx("div",{className:t.posterWrapper,children:e.jsx("img",{ref:o,className:t.listItemPoster,src:`${Y}/${c}`,alt:`Poster for ${r}`})}),e.jsxs("div",{className:t.listItemInfo,children:[e.jsxs("h2",{children:["Назва: ",r]}),e.jsxs("span",{children:["Director: ",x]}),e.jsxs("span",{children:["Genre: ",h]}),e.jsxs("span",{children:["Release: ",m]})]}),e.jsx("button",{children:e.jsx("svg",{onClick:()=>n(l,j),className:`${t.like} ${j?t.likeActive:""}`,children:e.jsx("use",{href:`${u}#icon-heart`})})}),e.jsx("button",{children:e.jsx("svg",{className:t.video,children:e.jsx("use",{href:`${u}#icon-video`})})}),e.jsx("button",{className:t.button,onClick:()=>i(l),children:"Delete"}),e.jsx(y,{movie:{_id:l,title:r,director:x,genre:h,poster:c,releaseDate:m,favorite:j},className:t.btnEdit})]},l));return e.jsx("ol",{className:t.list,children:v})},B={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:"",poster:null},w=({onSubmit:a})=>{const{state:i,handleChange:o,reset:d}=D({initialState:B,onSubmit:a}),n=c=>{c.preventDefault();const m=new FormData(c.currentTarget);m.set("favorite",i.favorite),a(m),d()},{title:v,director:l,favorite:r,releaseDate:x}=i,h=[/\d/,/\d/,/\d/,/\d/];return e.jsxs("form",{onSubmit:n,className:s.form,encType:"multipart/form-data",children:[e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie title"}),e.jsx("input",{value:v,name:"title",onChange:o,className:s.textField,placeholder:"Movie title",required:!0})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie director"}),e.jsx("input",{value:l,name:"director",onChange:o,className:s.textField,placeholder:"Movie director",required:!0})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Favorite"}),e.jsx("input",{checked:r,name:"favorite",onChange:o,className:s.checkbox,type:"checkbox"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie genre"}),e.jsxs("select",{name:"genre",onChange:o,children:[e.jsx("option",{value:"fantastic",children:"Fantastic"}),e.jsx("option",{value:"love story",children:"Love story"})]})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie release date"}),e.jsx(E,{mask:h,value:x,name:"releaseDate",onChange:o,className:s.textField,placeholder:"YYYY",required:!0})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Poster"}),e.jsx("input",{name:"poster",type:"file"})]}),e.jsx("button",{className:s.btn,type:"submit",children:"Add movie"})]})},U="_title_xta3q_1",V="_blocks_xta3q_8",z={title:U,blocks:V},H=()=>{const a=M(F),i=_();f.useEffect(()=>{i(N())},[i]);const o=n=>{i(k(n))},d=n=>{i(I(n))};return e.jsx("div",{children:e.jsxs("div",{className:z.blocks,children:[e.jsx(p,{title:"Add movie",children:e.jsx(w,{onSubmit:o})}),e.jsx(p,{title:"Movie list",children:a.length>0?e.jsx(L,{items:a,onDeleteMovie:d}):e.jsx(b,{children:"No movies have been added yet"})})]})})},Q=()=>e.jsxs("div",{children:[e.jsx(b,{children:"My movies page"}),e.jsx(H,{})]});export{Q as default};
