import{j as c,r as K,a as fe,g as de,u as he,b as ve,f as pe,c as me,d as ge}from"./index-8e1417cf.js";import{u as ke}from"./useForm-02fdac59.js";const xe="_wrapper_kfp2p_1",be="_title_kfp2p_5",q={wrapper:xe,title:be},U=({title:r,children:n})=>c.jsxs("div",{className:q.wrapper,children:[c.jsx("h4",{className:q.title,children:r}),n]}),Pe="_list_4o1na_1",N={list:Pe},{VITE_API_URL:Ee}={}.VITE_API_URL,je=({items:r,onDeleteMovie:n})=>{const e=r.map(({_id:t,title:i,director:a,poster:s})=>c.jsxs("li",{className:N.listItem,children:[s&&c.jsx("img",{className:N.listItemPoster,src:`${Ee}/${s}`}),"Title: ",i,". Director: ",a,"."," ",c.jsx("button",{onClick:()=>n(t),children:"Delete"})]},t));return c.jsx("ol",{className:N.list,children:e})};var Q={exports:{}},W={exports:{}},ye=function(r,n,e,t,i,a,s,u){if(!r){var f;if(n===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[e,t,i,a,s,u],l=0;f=new Error(n.replace(/%s/g,function(){return d[l++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}},we=ye;function ee(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var P=K,V=ee(P),Se=fe,X=ee(we);function F(){return(F=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r}).apply(this,arguments)}function te(r,n){return(te=Object.setPrototypeOf||function(e,t){return function(i,a){for(var s=Object.getOwnPropertyNames(a),u=0;u<s.length;u++){var f=s[u],d=Object.getOwnPropertyDescriptor(a,f);d&&d.configurable&&i[f]===void 0&&Object.defineProperty(i,f,d)}}(e,t),e})(r,n)}function ne(r,n){if(r==null)return{};var e,t,i={},a=Object.keys(r);for(t=0;t<a.length;t++)e=a[t],n.indexOf(e)>=0||(i[e]=r[e]);return i}function ie(r){return requestAnimationFrame(r)}function Y(r){cancelAnimationFrame(r)}function C(r){var n=r.ownerDocument;return n.hasFocus()&&n.activeElement===r}function re(r){return r==null?void 0:r.ownerDocument}function Me(r){var n=function(e){var t;return(t=re(e))==null?void 0:t.defaultView}(r);return!!n&&r instanceof n.HTMLElement}function A(r){return P.useCallback(function(){var n=r.current,e=typeof window<"u"&&Me(n);if(!n||!e)return null;if(n.nodeName!=="INPUT"&&(n=n.querySelector("input")),!n)throw new Error("react-input-mask: inputComponent doesn't contain input node");return n},[r])}function Ce(r,n){var e,t,i,a,s=P.useRef({start:null,end:null}),u=A(r),f=P.useCallback(function(){return function(m){var v=m.selectionStart,j=m.selectionEnd;return{start:v,end:j,length:j-v}}(u())},[u]),d=P.useCallback(function(){return s.current},[]),l=P.useCallback(function(m){var v=u();v&&C(v)&&(function(j,S,M){M===void 0&&(M=S),j.setSelectionRange(S,M)}(v,m.start,m.end),s.current=f())},[u,f]),o=P.useCallback(function(){s.current=f()},[f]),h=(e=o,t=P.useRef(null),i=P.useCallback(function(){t.current===null&&function m(){e(),t.current=ie(m)}()},[e]),a=P.useCallback(function(){Y(t.current),t.current=null},[]),P.useEffect(function(){t.current&&(a(),i())},[i,a]),P.useEffect(Y,[]),[i,a]),k=h[0],E=h[1];return P.useLayoutEffect(function(){if(n){var m=u();return m.addEventListener("focus",k),m.addEventListener("blur",E),C(m)&&k(),function(){m.removeEventListener("focus",k),m.removeEventListener("blur",E),E()}}}),{getSelection:f,getLastSelection:d,setSelection:l}}function Fe(r,n){var e=P.useRef(),t=Ce(e,n),i=t.getSelection,a=t.getLastSelection,s=t.setSelection,u=function(o,h){var k=A(o),E=P.useRef(h);return{getValue:P.useCallback(function(){return k().value},[k]),getLastValue:P.useCallback(function(){return E.current},[]),setValue:P.useCallback(function(m){E.current=m;var v=k();v&&(v.value=m)},[k])}}(e,r),f=u.getValue,d=u.getLastValue,l=u.setValue;return{inputRef:e,getInputState:function(){return{value:f(),selection:i()}},getLastInputState:function(){return{value:d(),selection:a()}},setInputState:function(o){var h=o.value,k=o.selection;l(h),s(k)}}}var _e=["disabled","onBlur","onChange","onFocus","onMouseDown","readOnly","value"],Z={9:/[0-9]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/},Oe=function(r){var n=this;this.isCharacterAllowedAtPosition=function(e,t){var i=n.maskOptions.maskPlaceholder;return!!n.isCharacterFillingPosition(e,t)||!!i&&i[t]===e},this.isCharacterFillingPosition=function(e,t){var i=n.maskOptions.mask;if(!e||t>=i.length)return!1;if(!n.isPositionEditable(t))return i[t]===e;var a=i[t];return new RegExp(a).test(e)},this.isPositionEditable=function(e){var t=n.maskOptions,i=t.mask,a=t.permanents;return e<i.length&&a.indexOf(e)===-1},this.isValueEmpty=function(e){return e.split("").every(function(t,i){return!n.isPositionEditable(i)||!n.isCharacterFillingPosition(t,i)})},this.isValueFilled=function(e){return n.getFilledLength(e)===n.maskOptions.lastEditablePosition+1},this.getDefaultSelectionForValue=function(e){var t=n.getFilledLength(e),i=n.getRightEditablePosition(t);return{start:i,end:i}},this.getFilledLength=function(e){return function(t,i){for(var a=t.length-1;a>=0;a--)if(i(t[a],a))return a;return-1}(e.split(""),function(t,i){return n.isPositionEditable(i)&&n.isCharacterFillingPosition(t,i)})+1},this.getStringFillingLengthAtPosition=function(e,t){return e.split("").reduce(function(i,a){return n.insertCharacterAtPosition(i,a,i.length)},function(i,a){a===void 0&&(a=1);for(var s="",u=0;u<a;u++)s+=i;return s}(" ",t)).length-t},this.getLeftEditablePosition=function(e){for(var t=e;t>=0;t--)if(n.isPositionEditable(t))return t;return null},this.getRightEditablePosition=function(e){for(var t=n.maskOptions.mask,i=e;i<t.length;i++)if(n.isPositionEditable(i))return i;return null},this.formatValue=function(e){var t=n.maskOptions,i=t.maskPlaceholder,a=t.mask;if(!i){for(e=n.insertStringAtPosition("",e,0);e.length<a.length&&!n.isPositionEditable(e.length);)e+=a[e.length];return e}return n.insertStringAtPosition(i,e,0)},this.clearRange=function(e,t,i){if(!i)return e;var a=t+i,s=n.maskOptions,u=s.maskPlaceholder,f=s.mask,d=e.split("").map(function(l,o){var h=n.isPositionEditable(o);return!u&&o>=a&&!h?"":o<t||o>=a?l:h?u?u[o]:"":f[o]}).join("");return n.formatValue(d)},this.insertCharacterAtPosition=function(e,t,i){var a=n.maskOptions,s=a.mask,u=a.maskPlaceholder;if(i>=s.length)return e;var f=n.isCharacterAllowedAtPosition(t,i),d=n.isPositionEditable(i),l=n.getRightEditablePosition(i),o=u&&l?t===u[l]:null,h=e.slice(0,i);return!f&&d||(e=h+(f?t:s[i])),f||d||o||(e=n.insertCharacterAtPosition(e,t,i+1)),e},this.insertStringAtPosition=function(e,t,i){var a=n.maskOptions,s=a.mask,u=a.maskPlaceholder;if(!t||i>=s.length)return e;var f=t.split(""),d=n.isValueFilled(e)||!!u,l=e.slice(i);return e=f.reduce(function(o,h){return n.insertCharacterAtPosition(o,h,o.length)},e.slice(0,i)),d?e+=l.slice(e.length-i):n.isValueFilled(e)?e+=s.slice(e.length).join(""):e=l.split("").filter(function(o,h){return n.isPositionEditable(i+h)}).reduce(function(o,h){var k=n.getRightEditablePosition(o.length);return k===null?o:(n.isPositionEditable(o.length)||(o+=s.slice(o.length,k).join("")),n.insertCharacterAtPosition(o,h,o.length))},e),e},this.processChange=function(e,t){var i=n.maskOptions,a=i.mask,s=i.prefix,u=i.lastEditablePosition,f=e.value,d=e.selection,l=t.value,o=t.selection,h=f,k="",E=0,m=0,v=Math.min(o.start,d.start);return d.end>o.start?(k=h.slice(o.start,d.end),m=(E=n.getStringFillingLengthAtPosition(k,v))?o.length:0):h.length<l.length&&(m=l.length-h.length),h=l,m&&(m===1&&!o.length&&(v=o.start===d.start?n.getRightEditablePosition(d.start):n.getLeftEditablePosition(d.start)),h=n.clearRange(h,v,m)),h=n.insertStringAtPosition(h,k,v),(v+=E)>=a.length?v=a.length:v<s.length&&!E?v=s.length:v>=s.length&&v<u&&E&&(v=n.getRightEditablePosition(v)),{value:h=n.formatValue(h),enteredString:k,selection:{start:v,end:v}}},this.maskOptions=function(e){var t=e.mask,i=e.maskPlaceholder,a=[];if(!t)return{maskPlaceholder:null,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};if(typeof t=="string"){var s=!1,u="";t.split("").forEach(function(l){s||l!=="\\"?(!s&&Z[l]||a.push(u.length),u+=l,s=!1):s=!0}),t=u.split("").map(function(l,o){return a.indexOf(o)===-1?Z[l]:l})}else t.forEach(function(l,o){typeof l=="string"&&a.push(o)});i&&(i=i.length===1?t.map(function(l,o){return a.indexOf(o)!==-1?l:i}):i.split(""),a.forEach(function(l){i[l]=t[l]}),i=i.join(""));for(var f=a.filter(function(l,o){return l===o}).map(function(l){return t[l]}).join(""),d=t.length-1;a.indexOf(d)!==-1;)d--;return{maskPlaceholder:i,prefix:f,mask:t,lastEditablePosition:d,permanents:a}}(r)},Ve=["children"],De=function(r){var n,e;function t(){return r.apply(this,arguments)||this}return e=r,(n=t).prototype=Object.create(e.prototype),n.prototype.constructor=n,te(n,e),t.prototype.render=function(){var i=this.props,a=i.children,s=ne(i,Ve);return V.cloneElement(a,s)},t}(V.Component),Le=["alwaysShowMask","children","mask","maskPlaceholder","beforeMaskedStateChange"],H=P.forwardRef(function(r,n){var e=r.alwaysShowMask,t=r.children,i=r.mask,a=r.maskPlaceholder,s=r.beforeMaskedStateChange,u=ne(r,Le);(function(p){var g=p.mask,x=p.maskPlaceholder;g&&x&&x.length!==1&&x.length!==g.length&&X(!1)})(r);var f,d,l=new Oe({mask:i,maskPlaceholder:a}),o=!!i,h=!u.disabled&&!u.readOnly,k=r.value!==null&&r.value!==void 0,E=(f=o,d=P.useRef(),P.useEffect(function(){d.current=f}),d.current),m=Fe(function(p){return""+p}((k?r.value:r.defaultValue)||""),o),v=m.inputRef,j=m.getInputState,S=m.setInputState,M=m.getLastInputState,D=A(v);if(o&&k){var R=D(),L=R&&C(R)||e||r.value?l.formatValue(r.value):r.value;s&&(L=s({nextState:{value:L,selection:{start:null,end:null}}}).value),S(F({},M(),{value:L}))}var I=M(),ae=I.selection,oe=I.value;P.useLayoutEffect(function(){if(o){var p=C(D()),g=ae,x=j(),b=F({},x);if(!k){var y=x.value,_=l.formatValue(y),O=l.isValueEmpty(_);!O||p||e?b.value=_:O&&!p&&(b.value="")}p&&!E?b.selection=l.getDefaultSelectionForValue(b.value):k&&p&&g&&g.start!==null&&g.end!==null&&(b.selection=g),s&&(b=s({currentState:x,nextState:b})),S(b)}});var T=F({},u,{onFocus:function(p){v.current=p.target;var g=j().value;if(o&&!l.isValueFilled(g)){var x=l.formatValue(g),b=l.getDefaultSelectionForValue(x),y={value:x,selection:b};s&&(x=(y=s({currentState:j(),nextState:y})).value,b=y.selection),S(y),x!==g&&r.onChange&&r.onChange(p),ie(function(){S(M())})}r.onFocus&&r.onFocus(p)},onBlur:function(p){var g=j().value,x=M().value;if(o&&!e&&l.isValueEmpty(x)){var b="",y={value:b,selection:{start:null,end:null}};s&&(b=(y=s({currentState:j(),nextState:y})).value),S(y),b!==g&&r.onChange&&r.onChange(p)}r.onBlur&&r.onBlur(p)},onChange:o&&h?function(p){var g=j(),x=M(),b=l.processChange(g,x);s&&(b=s({currentState:g,previousState:x,nextState:b})),S(b),r.onChange&&r.onChange(p)}:r.onChange,onMouseDown:o&&h?function(p){var g=D(),x=j().value,b=re(g);if(!C(g)&&!l.isValueFilled(x)){var y=p.clientX,_=p.clientY,O=new Date().getTime();b.addEventListener("mouseup",function se(G){if(b.removeEventListener("mouseup",se),C(g)){var le=Math.abs(G.clientX-y),ue=Math.abs(G.clientY-_),B=Math.max(le,ue),z=new Date().getTime()-O;if(B<=10&&z<=200||B<=5&&z<=300){var $=M(),ce=F({},$,{selection:l.getDefaultSelectionForValue($.value)});S(ce)}}})}r.onMouseDown&&r.onMouseDown(p)}:r.onMouseDown,ref:function(p){v.current=Se.findDOMNode(p),function(g){return typeof g=="function"}(n)?n(p):n!==null&&typeof n=="object"&&(n.current=p)},value:o&&k?oe:r.value});return t?(function(p,g){_e.filter(function(x){return g.props[x]!=null&&g.props[x]!==p[x]}).length&&X(!1)}(r,t),V.createElement(De,T,t)):V.createElement("input",T)});H.defaultProps={alwaysShowMask:!1,maskPlaceholder:"_"},W.exports=H;var Ne=W.exports;Q.exports=Ne;var Ae=Q.exports;const Re=de(Ae),Ie={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:""},Te="_form_izw27_1",Ge="_formGroup_izw27_7",Be="_textField_izw27_15",ze="_checkbox_izw27_19",w={form:Te,formGroup:Ge,textField:Be,checkbox:ze},$e=({onSubmit:r})=>{const{state:n,handleChange:e,reset:t}=ke({initialState:Ie,onSubmit:r}),i=d=>{d.preventDefault();const l=new FormData(d.currentTarget);l.set("favorite",n.favorite),r(l),t()},{title:a,director:s,favorite:u,releaseDate:f}=n;return c.jsxs("form",{onSubmit:i,className:w.form,encType:"multipart/form-data",children:[c.jsxs("div",{className:w.formGroup,children:[c.jsx("label",{children:"Movie title"}),c.jsx("input",{value:a,name:"title",onChange:e,className:w.textField,placeholder:"Movie title",required:!0})]}),c.jsxs("div",{className:w.formGroup,children:[c.jsx("label",{children:"Movie director"}),c.jsx("input",{value:s,name:"director",onChange:e,className:w.textField,placeholder:"Movie director",required:!0})]}),c.jsxs("div",{className:w.formGroup,children:[c.jsx("label",{children:"Favorite"}),c.jsx("input",{checked:u,name:"favorite",onChange:e,className:w.checkbox,type:"checkbox"})]}),c.jsxs("div",{className:w.formGroup,children:[c.jsx("label",{children:"Movie genre"}),c.jsxs("select",{name:"genre",onChange:e,children:[c.jsx("option",{value:"fantastic",children:"Fantastic"}),c.jsx("option",{value:"love story",children:"Love story"})]})]}),c.jsxs("div",{className:w.formGroup,children:[c.jsx("label",{children:"Movie release date"}),c.jsx(Re,{value:f,name:"releaseDate",mask:"9999",onChange:e,className:w.textField,placeholder:"Movie date",required:!0})]}),c.jsxs("div",{className:w.formGroup,children:[c.jsx("label",{children:"Poster"}),c.jsx("input",{name:"poster",type:"file"})]}),c.jsx("button",{type:"submit",children:"Add movie"})]})},qe=({movies:r})=>r.items,Ue="_wrapper_j8hu4_1",Xe="_title_j8hu4_5",Ye="_blocks_j8hu4_12",J={wrapper:Ue,title:Xe,blocks:Ye},Ze=()=>{const r=he(qe),n=ve();K.useEffect(()=>{n(pe())},[n]);const e=i=>{n(me(i))},t=i=>{n(ge(i))};return c.jsx("div",{className:J.wrapper,children:c.jsxs("div",{className:J.blocks,children:[c.jsx(U,{title:"Add movie",children:c.jsx($e,{onSubmit:e})}),c.jsx(U,{title:"Movie list",children:c.jsx(je,{items:r,onDeleteMovie:t})})]})})},Ke=()=>c.jsxs("div",{className:"container",children:[c.jsx("h1",{className:"page-title",children:"My movies page"}),c.jsx(Ze,{})]});export{Ke as default};
