import{r as j,u as f,j as e,a as b,b as M,f as k,c as N,d as g}from"./index-3c9bba98.js";import{i as I,E as y,s,M as E,g as F,a as p}from"./movies-selectors-0f784ae5.js";import{u as D,T as _}from"./useForm-0f02f042.js";const A="_list_15n79_1",C="_listItem_15n79_10",P="_posterWrapper_15n79_22",$="_listItemPoster_15n79_34",G="_listItemInfo_15n79_46",T="_like_15n79_60",q="_likeActive_15n79_70",R="_button_15n79_75",S="_btnEdit_15n79_98",o={list:A,listItem:C,posterWrapper:P,listItemPoster:$,listItemInfo:G,like:T,likeActive:q,button:R,btnEdit:S},W="http://localhost:4444",Y=({items:a,onDeleteMovie:t})=>{const i=j.useRef(null),d=f(),n=(l,r)=>{d(b({id:l,favorite:!r}))},v=a.map(({_id:l,title:r,director:h,genre:x,poster:c,releaseDate:m,favorite:u})=>e.jsxs("li",{className:o.listItem,children:[c&&e.jsx("div",{className:o.posterWrapper,children:e.jsx("img",{ref:i,className:o.listItemPoster,src:`${W}/${c}`,alt:`Poster for ${r}`})}),e.jsxs("div",{className:o.listItemInfo,children:[e.jsxs("h2",{children:["Назва: ",r]}),e.jsxs("span",{children:["Director: ",h]}),e.jsxs("span",{children:["Genre: ",x]}),e.jsxs("span",{children:["Release: ",m]})]}),e.jsx("button",{children:e.jsx("svg",{onClick:()=>n(l,u),className:`${o.like} ${u?o.likeActive:""}`,children:e.jsx("use",{href:`${I}#icon-heart`})})}),e.jsx("button",{className:o.button,onClick:()=>t(l),children:"Delete"}),e.jsx(y,{movie:{_id:l,title:r,director:h,genre:x,poster:c,releaseDate:m,favorite:u},className:o.btnEdit})]},l));return e.jsx("ol",{className:o.list,children:v})},L={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:"",poster:null},B=({onSubmit:a})=>{const{state:t,handleChange:i,reset:d}=D({initialState:L,onSubmit:a}),n=c=>{c.preventDefault();const m=new FormData(c.currentTarget);m.set("favorite",t.favorite),a(m),d()},{title:v,director:l,favorite:r,releaseDate:h}=t,x=[/\d/,/\d/,/\d/,/\d/];return e.jsxs("form",{onSubmit:n,className:s.form,encType:"multipart/form-data",children:[e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie title"}),e.jsx("input",{value:v,name:"title",onChange:i,className:s.textField,placeholder:"Movie title",required:!0})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie director"}),e.jsx("input",{value:l,name:"director",onChange:i,className:s.textField,placeholder:"Movie director",required:!0})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Favorite"}),e.jsx("input",{checked:r,name:"favorite",onChange:i,className:s.checkbox,type:"checkbox"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie genre"}),e.jsxs("select",{name:"genre",onChange:i,children:[e.jsx("option",{value:"fantastic",children:"Fantastic"}),e.jsx("option",{value:"love story",children:"Love story"})]})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie release date"}),e.jsx(E,{mask:x,value:h,name:"releaseDate",onChange:i,className:s.textField,placeholder:"YYYY",required:!0})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Poster"}),e.jsx("input",{name:"poster",type:"file"})]}),e.jsx("button",{className:s.btn,type:"submit",children:"Add movie"})]})},w="_title_xta3q_1",U="_blocks_xta3q_8",V={title:w,blocks:U},z=()=>{const a=M(F),t=f();j.useEffect(()=>{t(k())},[t]);const i=n=>{t(N(n))},d=n=>{t(g(n))};return e.jsx("div",{children:e.jsxs("div",{className:V.blocks,children:[e.jsx(p,{title:"Add movie",children:e.jsx(B,{onSubmit:i})}),e.jsx(p,{title:"Movie list",children:a.length>0?e.jsx(Y,{items:a,onDeleteMovie:d}):e.jsx(_,{children:"No movies have been added yet"})})]})})},O=()=>e.jsxs("div",{children:[e.jsx(_,{children:"My movies page"}),e.jsx(z,{})]});export{O as default};
