import{r as j,j as e,u as f,a as _,f as b,b as M,d as N}from"./index-629b9d9f.js";import{E as I,s,M as g,g as y,a as u}from"./movies-selectors-80e3da27.js";import{u as k}from"./useForm-ccc426a2.js";const E="_list_1f2iz_1",D="_listItem_1f2iz_10",F="_posterWrapper_1f2iz_22",P="_listItemPoster_1f2iz_34",z="_listItemInfo_1f2iz_46",C="_button_1f2iz_60",G="_btnEdit_1f2iz_83",o={list:E,listItem:D,posterWrapper:F,listItemPoster:P,listItemInfo:z,button:C,btnEdit:G},q="http://localhost:4444",w=({items:l,onDeleteMovie:t})=>{const a=j.useRef(null),r=l.map(({_id:i,title:n,director:d,genre:m,poster:c,releaseDate:p,favorite:h})=>e.jsxs("li",{className:o.listItem,children:[c&&e.jsx("div",{className:o.posterWrapper,children:e.jsx("img",{ref:a,className:o.listItemPoster,src:`${q}/${c}`,alt:`Poster for ${n}`})}),e.jsxs("div",{className:o.listItemInfo,children:[e.jsxs("h2",{children:["Назва: ",n]}),e.jsxs("span",{children:["Director: ",d]}),e.jsxs("span",{children:["Genre: ",m]}),e.jsxs("span",{children:["Release: ",p]})]}),e.jsx("button",{className:o.button,onClick:()=>t(i),children:"Delete"}),e.jsx(I,{movie:{_id:i,title:n,director:d,genre:m,poster:c,releaseDate:p,favorite:h},className:o.btnEdit})]},i));return e.jsx("ol",{className:o.list,children:r})},R={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:"",poster:null},$=({onSubmit:l})=>{const{state:t,handleChange:a,reset:r}=k({initialState:R,onSubmit:l}),i=h=>{h.preventDefault();const x=new FormData(h.currentTarget);x.set("favorite",t.favorite),l(x),r()},{title:n,director:d,favorite:m,releaseDate:c}=t,p=[/\d/,/\d/,/\d/,/\d/];return e.jsxs("form",{onSubmit:i,className:s.form,encType:"multipart/form-data",children:[e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie title"}),e.jsx("input",{value:n,name:"title",onChange:a,className:s.textField,placeholder:"Movie title",required:!0})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie director"}),e.jsx("input",{value:d,name:"director",onChange:a,className:s.textField,placeholder:"Movie director",required:!0})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Favorite"}),e.jsx("input",{checked:m,name:"favorite",onChange:a,className:s.checkbox,type:"checkbox"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie genre"}),e.jsxs("select",{name:"genre",onChange:a,children:[e.jsx("option",{value:"fantastic",children:"Fantastic"}),e.jsx("option",{value:"love story",children:"Love story"})]})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Movie release date"}),e.jsx(g,{mask:p,value:c,name:"releaseDate",onChange:a,className:s.textField,placeholder:"YYYY",required:!0})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{children:"Poster"}),e.jsx("input",{name:"poster",type:"file"})]}),e.jsx("button",{className:s.btn,type:"submit",children:"Add movie"})]})},A="_wrapper_2saq2_1",S="_title_2saq2_5",W="_blocks_2saq2_12",v={wrapper:A,title:S,blocks:W},Y=()=>{const l=f(y),t=_();j.useEffect(()=>{t(b())},[t]);const a=i=>{t(M(i))},r=i=>{t(N(i))};return e.jsx("div",{className:v.wrapper,children:e.jsxs("div",{className:v.blocks,children:[e.jsx(u,{title:"Add movie",children:e.jsx($,{onSubmit:a})}),e.jsx(u,{title:"Movie list",children:e.jsx(w,{items:l,onDeleteMovie:r})})]})})},U=()=>e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"page-title",children:"My movies page"}),e.jsx(Y,{})]});export{U as default};
