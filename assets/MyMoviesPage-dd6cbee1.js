import{j as f,r as D,a as fe,g as de,u as he,b as ve,f as me,c as pe,d as ge}from"./index-93c3b55e.js";import{u as ke}from"./useForm-10f0a6a3.js";const xe="_wrapper_kfp2p_1",be="_title_kfp2p_5",U={wrapper:xe,title:be},X=({title:r,children:n})=>f.jsxs("div",{className:U.wrapper,children:[f.jsx("h4",{className:U.title,children:r}),n]}),Pe="_list_18nq8_1",Ee="_listItem_18nq8_17",je="_listItemPoster_18nq8_23",A={list:Pe,listItem:Ee,listItemPoster:je},ye={}.VITE_API_URL,we=({items:r,onDeleteMovie:n})=>{const e=D.useRef(null),t=r.map(({_id:i,title:a,director:l,genre:u,poster:c})=>f.jsxs("li",{className:A.listItem,children:[c&&f.jsx("img",{ref:e,className:A.listItemPoster,src:`${ye}/${c}`,alt:`Poster for ${a}`}),"Title: ",a,". Director: ",l,". Genre: ",u,f.jsx("button",{onClick:()=>n(i),children:"Delete"})]},i));return f.jsx("ol",{className:A.list,children:t})};var Q={exports:{}},W={exports:{}},Se=function(r,n,e,t,i,a,l,u){if(!r){var c;if(n===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[e,t,i,a,l,u],s=0;c=new Error(n.replace(/%s/g,function(){return d[s++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Me=Se;function ee(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var P=D,V=ee(P),Ce=fe,Y=ee(Me);function _(){return(_=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r}).apply(this,arguments)}function te(r,n){return(te=Object.setPrototypeOf||function(e,t){return function(i,a){for(var l=Object.getOwnPropertyNames(a),u=0;u<l.length;u++){var c=l[u],d=Object.getOwnPropertyDescriptor(a,c);d&&d.configurable&&i[c]===void 0&&Object.defineProperty(i,c,d)}}(e,t),e})(r,n)}function ne(r,n){if(r==null)return{};var e,t,i={},a=Object.keys(r);for(t=0;t<a.length;t++)e=a[t],n.indexOf(e)>=0||(i[e]=r[e]);return i}function ie(r){return requestAnimationFrame(r)}function Z(r){cancelAnimationFrame(r)}function C(r){var n=r.ownerDocument;return n.hasFocus()&&n.activeElement===r}function re(r){return r==null?void 0:r.ownerDocument}function _e(r){var n=function(e){var t;return(t=re(e))==null?void 0:t.defaultView}(r);return!!n&&r instanceof n.HTMLElement}function R(r){return P.useCallback(function(){var n=r.current,e=typeof window<"u"&&_e(n);if(!n||!e)return null;if(n.nodeName!=="INPUT"&&(n=n.querySelector("input")),!n)throw new Error("react-input-mask: inputComponent doesn't contain input node");return n},[r])}function Fe(r,n){var e,t,i,a,l=P.useRef({start:null,end:null}),u=R(r),c=P.useCallback(function(){return function(p){var v=p.selectionStart,j=p.selectionEnd;return{start:v,end:j,length:j-v}}(u())},[u]),d=P.useCallback(function(){return l.current},[]),s=P.useCallback(function(p){var v=u();v&&C(v)&&(function(j,S,M){M===void 0&&(M=S),j.setSelectionRange(S,M)}(v,p.start,p.end),l.current=c())},[u,c]),o=P.useCallback(function(){l.current=c()},[c]),h=(e=o,t=P.useRef(null),i=P.useCallback(function(){t.current===null&&function p(){e(),t.current=ie(p)}()},[e]),a=P.useCallback(function(){Z(t.current),t.current=null},[]),P.useEffect(function(){t.current&&(a(),i())},[i,a]),P.useEffect(Z,[]),[i,a]),k=h[0],E=h[1];return P.useLayoutEffect(function(){if(n){var p=u();return p.addEventListener("focus",k),p.addEventListener("blur",E),C(p)&&k(),function(){p.removeEventListener("focus",k),p.removeEventListener("blur",E),E()}}}),{getSelection:c,getLastSelection:d,setSelection:s}}function Oe(r,n){var e=P.useRef(),t=Fe(e,n),i=t.getSelection,a=t.getLastSelection,l=t.setSelection,u=function(o,h){var k=R(o),E=P.useRef(h);return{getValue:P.useCallback(function(){return k().value},[k]),getLastValue:P.useCallback(function(){return E.current},[]),setValue:P.useCallback(function(p){E.current=p;var v=k();v&&(v.value=p)},[k])}}(e,r),c=u.getValue,d=u.getLastValue,s=u.setValue;return{inputRef:e,getInputState:function(){return{value:c(),selection:i()}},getLastInputState:function(){return{value:d(),selection:a()}},setInputState:function(o){var h=o.value,k=o.selection;s(h),l(k)}}}var Ve=["disabled","onBlur","onChange","onFocus","onMouseDown","readOnly","value"],H={9:/[0-9]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/},De=function(r){var n=this;this.isCharacterAllowedAtPosition=function(e,t){var i=n.maskOptions.maskPlaceholder;return!!n.isCharacterFillingPosition(e,t)||!!i&&i[t]===e},this.isCharacterFillingPosition=function(e,t){var i=n.maskOptions.mask;if(!e||t>=i.length)return!1;if(!n.isPositionEditable(t))return i[t]===e;var a=i[t];return new RegExp(a).test(e)},this.isPositionEditable=function(e){var t=n.maskOptions,i=t.mask,a=t.permanents;return e<i.length&&a.indexOf(e)===-1},this.isValueEmpty=function(e){return e.split("").every(function(t,i){return!n.isPositionEditable(i)||!n.isCharacterFillingPosition(t,i)})},this.isValueFilled=function(e){return n.getFilledLength(e)===n.maskOptions.lastEditablePosition+1},this.getDefaultSelectionForValue=function(e){var t=n.getFilledLength(e),i=n.getRightEditablePosition(t);return{start:i,end:i}},this.getFilledLength=function(e){return function(t,i){for(var a=t.length-1;a>=0;a--)if(i(t[a],a))return a;return-1}(e.split(""),function(t,i){return n.isPositionEditable(i)&&n.isCharacterFillingPosition(t,i)})+1},this.getStringFillingLengthAtPosition=function(e,t){return e.split("").reduce(function(i,a){return n.insertCharacterAtPosition(i,a,i.length)},function(i,a){a===void 0&&(a=1);for(var l="",u=0;u<a;u++)l+=i;return l}(" ",t)).length-t},this.getLeftEditablePosition=function(e){for(var t=e;t>=0;t--)if(n.isPositionEditable(t))return t;return null},this.getRightEditablePosition=function(e){for(var t=n.maskOptions.mask,i=e;i<t.length;i++)if(n.isPositionEditable(i))return i;return null},this.formatValue=function(e){var t=n.maskOptions,i=t.maskPlaceholder,a=t.mask;if(!i){for(e=n.insertStringAtPosition("",e,0);e.length<a.length&&!n.isPositionEditable(e.length);)e+=a[e.length];return e}return n.insertStringAtPosition(i,e,0)},this.clearRange=function(e,t,i){if(!i)return e;var a=t+i,l=n.maskOptions,u=l.maskPlaceholder,c=l.mask,d=e.split("").map(function(s,o){var h=n.isPositionEditable(o);return!u&&o>=a&&!h?"":o<t||o>=a?s:h?u?u[o]:"":c[o]}).join("");return n.formatValue(d)},this.insertCharacterAtPosition=function(e,t,i){var a=n.maskOptions,l=a.mask,u=a.maskPlaceholder;if(i>=l.length)return e;var c=n.isCharacterAllowedAtPosition(t,i),d=n.isPositionEditable(i),s=n.getRightEditablePosition(i),o=u&&s?t===u[s]:null,h=e.slice(0,i);return!c&&d||(e=h+(c?t:l[i])),c||d||o||(e=n.insertCharacterAtPosition(e,t,i+1)),e},this.insertStringAtPosition=function(e,t,i){var a=n.maskOptions,l=a.mask,u=a.maskPlaceholder;if(!t||i>=l.length)return e;var c=t.split(""),d=n.isValueFilled(e)||!!u,s=e.slice(i);return e=c.reduce(function(o,h){return n.insertCharacterAtPosition(o,h,o.length)},e.slice(0,i)),d?e+=s.slice(e.length-i):n.isValueFilled(e)?e+=l.slice(e.length).join(""):e=s.split("").filter(function(o,h){return n.isPositionEditable(i+h)}).reduce(function(o,h){var k=n.getRightEditablePosition(o.length);return k===null?o:(n.isPositionEditable(o.length)||(o+=l.slice(o.length,k).join("")),n.insertCharacterAtPosition(o,h,o.length))},e),e},this.processChange=function(e,t){var i=n.maskOptions,a=i.mask,l=i.prefix,u=i.lastEditablePosition,c=e.value,d=e.selection,s=t.value,o=t.selection,h=c,k="",E=0,p=0,v=Math.min(o.start,d.start);return d.end>o.start?(k=h.slice(o.start,d.end),p=(E=n.getStringFillingLengthAtPosition(k,v))?o.length:0):h.length<s.length&&(p=s.length-h.length),h=s,p&&(p===1&&!o.length&&(v=o.start===d.start?n.getRightEditablePosition(d.start):n.getLeftEditablePosition(d.start)),h=n.clearRange(h,v,p)),h=n.insertStringAtPosition(h,k,v),(v+=E)>=a.length?v=a.length:v<l.length&&!E?v=l.length:v>=l.length&&v<u&&E&&(v=n.getRightEditablePosition(v)),{value:h=n.formatValue(h),enteredString:k,selection:{start:v,end:v}}},this.maskOptions=function(e){var t=e.mask,i=e.maskPlaceholder,a=[];if(!t)return{maskPlaceholder:null,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};if(typeof t=="string"){var l=!1,u="";t.split("").forEach(function(s){l||s!=="\\"?(!l&&H[s]||a.push(u.length),u+=s,l=!1):l=!0}),t=u.split("").map(function(s,o){return a.indexOf(o)===-1?H[s]:s})}else t.forEach(function(s,o){typeof s=="string"&&a.push(o)});i&&(i=i.length===1?t.map(function(s,o){return a.indexOf(o)!==-1?s:i}):i.split(""),a.forEach(function(s){i[s]=t[s]}),i=i.join(""));for(var c=a.filter(function(s,o){return s===o}).map(function(s){return t[s]}).join(""),d=t.length-1;a.indexOf(d)!==-1;)d--;return{maskPlaceholder:i,prefix:c,mask:t,lastEditablePosition:d,permanents:a}}(r)},Le=["children"],Ne=function(r){var n,e;function t(){return r.apply(this,arguments)||this}return e=r,(n=t).prototype=Object.create(e.prototype),n.prototype.constructor=n,te(n,e),t.prototype.render=function(){var i=this.props,a=i.children,l=ne(i,Le);return V.cloneElement(a,l)},t}(V.Component),Ae=["alwaysShowMask","children","mask","maskPlaceholder","beforeMaskedStateChange"],J=P.forwardRef(function(r,n){var e=r.alwaysShowMask,t=r.children,i=r.mask,a=r.maskPlaceholder,l=r.beforeMaskedStateChange,u=ne(r,Ae);(function(m){var g=m.mask,x=m.maskPlaceholder;g&&x&&x.length!==1&&x.length!==g.length&&Y(!1)})(r);var c,d,s=new De({mask:i,maskPlaceholder:a}),o=!!i,h=!u.disabled&&!u.readOnly,k=r.value!==null&&r.value!==void 0,E=(c=o,d=P.useRef(),P.useEffect(function(){d.current=c}),d.current),p=Oe(function(m){return""+m}((k?r.value:r.defaultValue)||""),o),v=p.inputRef,j=p.getInputState,S=p.setInputState,M=p.getLastInputState,L=R(v);if(o&&k){var I=L(),N=I&&C(I)||e||r.value?s.formatValue(r.value):r.value;l&&(N=l({nextState:{value:N,selection:{start:null,end:null}}}).value),S(_({},M(),{value:N}))}var T=M(),ae=T.selection,oe=T.value;P.useLayoutEffect(function(){if(o){var m=C(L()),g=ae,x=j(),b=_({},x);if(!k){var y=x.value,F=s.formatValue(y),O=s.isValueEmpty(F);!O||m||e?b.value=F:O&&!m&&(b.value="")}m&&!E?b.selection=s.getDefaultSelectionForValue(b.value):k&&m&&g&&g.start!==null&&g.end!==null&&(b.selection=g),l&&(b=l({currentState:x,nextState:b})),S(b)}});var G=_({},u,{onFocus:function(m){v.current=m.target;var g=j().value;if(o&&!s.isValueFilled(g)){var x=s.formatValue(g),b=s.getDefaultSelectionForValue(x),y={value:x,selection:b};l&&(x=(y=l({currentState:j(),nextState:y})).value,b=y.selection),S(y),x!==g&&r.onChange&&r.onChange(m),ie(function(){S(M())})}r.onFocus&&r.onFocus(m)},onBlur:function(m){var g=j().value,x=M().value;if(o&&!e&&s.isValueEmpty(x)){var b="",y={value:b,selection:{start:null,end:null}};l&&(b=(y=l({currentState:j(),nextState:y})).value),S(y),b!==g&&r.onChange&&r.onChange(m)}r.onBlur&&r.onBlur(m)},onChange:o&&h?function(m){var g=j(),x=M(),b=s.processChange(g,x);l&&(b=l({currentState:g,previousState:x,nextState:b})),S(b),r.onChange&&r.onChange(m)}:r.onChange,onMouseDown:o&&h?function(m){var g=L(),x=j().value,b=re(g);if(!C(g)&&!s.isValueFilled(x)){var y=m.clientX,F=m.clientY,O=new Date().getTime();b.addEventListener("mouseup",function se(B){if(b.removeEventListener("mouseup",se),C(g)){var le=Math.abs(B.clientX-y),ue=Math.abs(B.clientY-F),$=Math.max(le,ue),q=new Date().getTime()-O;if($<=10&&q<=200||$<=5&&q<=300){var z=M(),ce=_({},z,{selection:s.getDefaultSelectionForValue(z.value)});S(ce)}}})}r.onMouseDown&&r.onMouseDown(m)}:r.onMouseDown,ref:function(m){v.current=Ce.findDOMNode(m),function(g){return typeof g=="function"}(n)?n(m):n!==null&&typeof n=="object"&&(n.current=m)},value:o&&k?oe:r.value});return t?(function(m,g){Ve.filter(function(x){return g.props[x]!=null&&g.props[x]!==m[x]}).length&&Y(!1)}(r,t),V.createElement(Ne,G,t)):V.createElement("input",G)});J.defaultProps={alwaysShowMask:!1,maskPlaceholder:"_"},W.exports=J;var Re=W.exports;Q.exports=Re;var Ie=Q.exports;const Te=de(Ie),Ge={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:""},Be="_form_izw27_1",$e="_formGroup_izw27_7",qe="_textField_izw27_15",ze="_checkbox_izw27_19",w={form:Be,formGroup:$e,textField:qe,checkbox:ze},Ue=({onSubmit:r})=>{const{state:n,handleChange:e,reset:t}=ke({initialState:Ge,onSubmit:r}),i=D.useRef(null),a=s=>{s.preventDefault();const o=new FormData(s.currentTarget);o.set("favorite",n.favorite),r(o),t()},{title:l,director:u,favorite:c,releaseDate:d}=n;return f.jsxs("form",{onSubmit:a,className:w.form,encType:"multipart/form-data",children:[f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Movie title"}),f.jsx("input",{value:l,name:"title",onChange:e,className:w.textField,placeholder:"Movie title",required:!0})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Movie director"}),f.jsx("input",{value:u,name:"director",onChange:e,className:w.textField,placeholder:"Movie director",required:!0})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Favorite"}),f.jsx("input",{checked:c,name:"favorite",onChange:e,className:w.checkbox,type:"checkbox"})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Movie genre"}),f.jsxs("select",{name:"genre",onChange:e,children:[f.jsx("option",{value:"fantastic",children:"Fantastic"}),f.jsx("option",{value:"love story",children:"Love story"})]})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Movie release date"}),f.jsx(Te,{ref:i,value:d,name:"releaseDate",mask:"9999",onChange:e,className:w.textField,placeholder:"Book date",required:!0})]}),f.jsxs("div",{className:w.formGroup,children:[f.jsx("label",{children:"Poster"}),f.jsx("input",{name:"poster",type:"file"})]}),f.jsx("button",{type:"submit",children:"Add movie"})]})},Xe=({movies:r})=>r.items,Ye="_wrapper_j8hu4_1",Ze="_title_j8hu4_5",He="_blocks_j8hu4_12",K={wrapper:Ye,title:Ze,blocks:He},Je=()=>{const r=he(Xe),n=ve();D.useEffect(()=>{n(me())},[n]);const e=i=>{n(pe(i))},t=i=>{n(ge(i))};return f.jsx("div",{className:K.wrapper,children:f.jsxs("div",{className:K.blocks,children:[f.jsx(X,{title:"Add movie",children:f.jsx(Ue,{onSubmit:e})}),f.jsx(X,{title:"Movie list",children:f.jsx(we,{items:r,onDeleteMovie:t})})]})})},We=()=>f.jsxs("div",{className:"container",children:[f.jsx("h1",{className:"page-title",children:"My movies page"}),f.jsx(Je,{})]});export{We as default};
