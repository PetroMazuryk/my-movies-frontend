import{r as se,a as he,j as e,c as me,g as ve,u as ce,b as ge,d as ye,f as xe,e as be,h as je}from"./index-011da539.js";import{g as ke,M as le}from"./movies-selectors-2210c259.js";import{u as de}from"./useForm-a5c346e0.js";const _e="_list_1atgn_1",Ce="_listItem_1atgn_10",Me="_posterWrapper_1atgn_22",Ne="_listItemPoster_1atgn_34",Oe="_listItemInfo_1atgn_46",Te="_button_1atgn_60",Pe="_btnEdit_1atgn_83",re={list:_e,listItem:Ce,posterWrapper:Me,listItemPoster:Ne,listItemInfo:Oe,button:Te,btnEdit:Pe},we="_overlay_nd52g_1",Ee="_modal_nd52g_14",Se="_close_nd52g_22",ie={overlay:we,modal:Ee,close:Se},Ie=document.getElementById("modal-root"),De=({close:O,title:E,content:P,actions:u})=>{const r=({target:o,currentTarget:a,code:d})=>{(o===a||d==="Escape")&&O()};return se.useEffect(()=>{const o=a=>r(a);return document.body.addEventListener("keydown",o),()=>document.body.removeEventListener("keydown",o)},[]),he.createPortal(e.jsx("div",{onClick:r,className:ie.overlay,children:e.jsxs("div",{className:ie.modal,children:[e.jsx("span",{onClick:O,className:ie.close,children:"X"}),E&&e.jsx("h2",{children:E}),P&&e.jsx("div",{children:P}),u&&e.jsx("div",{className:ie.actions,children:u})]})}),Ie)};var fe={exports:{}};(function(O,E){(function(P,u){O.exports=u(se)})(me,function(P){return function(u){function r(a){if(o[a])return o[a].exports;var d=o[a]={exports:{},id:a,loaded:!1};return u[a].call(d.exports,d,d.exports,r),d.loaded=!0,d.exports}var o={};return r.m=u,r.c=o,r.p="",r(0)}([function(u,r,o){function a(c){return c&&c.__esModule?c:{default:c}}function d(c,t){var n={};for(var s in c)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(c,s)&&(n[s]=c[s]);return n}function p(c,t){if(!(c instanceof t))throw new TypeError("Cannot call a class as a function")}function h(c,t){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?c:t}function b(c,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);c.prototype=Object.create(t&&t.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(c,t):c.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.conformToMask=void 0;var g=Object.assign||function(c){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(c[s]=n[s])}return c},y=function(){function c(t,n){for(var s=0;s<n.length;s++){var v=n[s];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(t,v.key,v)}}return function(t,n,s){return n&&c(t.prototype,n),s&&c(t,s),t}}(),C=o(3);Object.defineProperty(r,"conformToMask",{enumerable:!0,get:function(){return a(C).default}});var k=o(11),l=a(k),x=o(9),i=a(x),N=o(5),Y=a(N),w=o(2),B=function(c){function t(){var n;p(this,t);for(var s=arguments.length,v=Array(s),m=0;m<s;m++)v[m]=arguments[m];var f=h(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(v)));return f.setRef=f.setRef.bind(f),f.onBlur=f.onBlur.bind(f),f.onChange=f.onChange.bind(f),f}return b(t,c),y(t,[{key:"setRef",value:function(n){this.inputElement=n}},{key:"initTextMask",value:function(){var n=this.props,s=this.props.value;this.textMaskInputElement=(0,Y.default)(g({inputElement:this.inputElement},n)),this.textMaskInputElement.update(s)}},{key:"componentDidMount",value:function(){this.initTextMask()}},{key:"componentDidUpdate",value:function(n){var s=this.props,v=s.value,m=s.pipe,f=s.mask,J=s.guide,R=s.placeholderChar,L=s.showMask,M={guide:J,placeholderChar:R,showMask:L},$=typeof m=="function"&&typeof n.pipe=="function"?m.toString()!==n.pipe.toString():(0,w.isNil)(m)&&!(0,w.isNil)(n.pipe)||!(0,w.isNil)(m)&&(0,w.isNil)(n.pipe),D=f.toString()!==n.mask.toString(),G=Object.keys(M).some(function(T){return M[T]!==n[T]})||D||$,A=v!==this.inputElement.value;(A||G)&&this.initTextMask()}},{key:"render",value:function(){var s=this.props,v=s.render,m=d(s,["render"]);return delete m.mask,delete m.guide,delete m.pipe,delete m.placeholderChar,delete m.keepCharPositions,delete m.value,delete m.onBlur,delete m.onChange,delete m.showMask,v(this.setRef,g({onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value},m))}},{key:"onChange",value:function(n){this.textMaskInputElement.update(),typeof this.props.onChange=="function"&&this.props.onChange(n)}},{key:"onBlur",value:function(n){typeof this.props.onBlur=="function"&&this.props.onBlur(n)}}]),t}(l.default.PureComponent);r.default=B,B.propTypes={mask:i.default.oneOfType([i.default.array,i.default.func,i.default.bool,i.default.shape({mask:i.default.oneOfType([i.default.array,i.default.func]),pipe:i.default.func})]).isRequired,guide:i.default.bool,value:i.default.oneOfType([i.default.string,i.default.number]),pipe:i.default.func,placeholderChar:i.default.string,keepCharPositions:i.default.bool,showMask:i.default.bool},B.defaultProps={render:function(c,t){return l.default.createElement("input",g({ref:c},t))}}},function(u,r){Object.defineProperty(r,"__esModule",{value:!0}),r.placeholderChar="_",r.strFunction="function"},function(u,r,o){function a(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.placeholderChar;if(!d(l))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(l.indexOf(x)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(x)+`

`)+("The mask that was received is: "+JSON.stringify(l)));return l.map(function(i){return i instanceof RegExp?x:i}).join("")}function d(l){return Array.isArray&&Array.isArray(l)||l instanceof Array}function p(l){return typeof l=="string"||l instanceof String}function h(l){return typeof l=="number"&&l.length===void 0&&!isNaN(l)}function b(l){return typeof l>"u"||l===null}function g(l){for(var x=[],i=void 0;i=l.indexOf(k),i!==-1;)x.push(i),l.splice(i,1);return{maskWithoutCaretTraps:l,indexes:x}}Object.defineProperty(r,"__esModule",{value:!0}),r.convertMaskToPlaceholder=a,r.isArray=d,r.isString=p,r.isNumber=h,r.isNil=b,r.processCaretTraps=g;var y=o(1),C=[],k="[]"},function(u,r,o){function a(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,p.isArray)(C)){if((typeof C>"u"?"undefined":d(C))!==h.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");C=C(y,k),C=(0,p.processCaretTraps)(C).maskWithoutCaretTraps}var l=k.guide,x=l===void 0||l,i=k.previousConformedValue,N=i===void 0?g:i,Y=k.placeholderChar,w=Y===void 0?h.placeholderChar:Y,B=k.placeholder,c=B===void 0?(0,p.convertMaskToPlaceholder)(C,w):B,t=k.currentCaretPosition,n=k.keepCharPositions,s=x===!1&&N!==void 0,v=y.length,m=N.length,f=c.length,J=C.length,R=v-m,L=R>0,M=t+(L?-R:0),$=M+Math.abs(R);if(n===!0&&!L){for(var D=g,G=M;G<$;G++)c[G]===w&&(D+=w);y=y.slice(0,M)+D+y.slice(M,v)}for(var A=y.split(g).map(function(W,U){return{char:W,isNew:U>=M&&U<$}}),T=v-1;T>=0;T--){var _=A[T].char;if(_!==w){var X=T>=M&&m===J;_===c[X?T-R:T]&&A.splice(T,1)}}var V=g,z=!1;e:for(var K=0;K<f;K++){var ee=c[K];if(ee===w){if(A.length>0)for(;A.length>0;){var te=A.shift(),Q=te.char,oe=te.isNew;if(Q===w&&s!==!0){V+=w;continue e}if(C[K].test(Q)){if(n===!0&&oe!==!1&&N!==g&&x!==!1&&L){for(var ne=A.length,Z=null,q=0;q<ne;q++){var H=A[q];if(H.char!==w&&H.isNew===!1)break;if(H.char===w){Z=q;break}}Z!==null?(V+=Q,A.splice(Z,1)):K--}else V+=Q;continue e}z=!0}s===!1&&(V+=c.substr(K,f));break}V+=ee}if(s&&L===!1){for(var F=null,S=0;S<V.length;S++)c[S]===w&&(F=S);V=F!==null?V.substr(0,F+1):g}return{conformedValue:V,meta:{someCharsRejected:z}}}Object.defineProperty(r,"__esModule",{value:!0});var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y};r.default=a;var p=o(2),h=o(1),b=[],g=""},function(u,r){function o(p){var h=p.previousConformedValue,b=h===void 0?d:h,g=p.previousPlaceholder,y=g===void 0?d:g,C=p.currentCaretPosition,k=C===void 0?0:C,l=p.conformedValue,x=p.rawValue,i=p.placeholderChar,N=p.placeholder,Y=p.indexesOfPipedChars,w=Y===void 0?a:Y,B=p.caretTrapIndexes,c=B===void 0?a:B;if(k===0||!x.length)return 0;var t=x.length,n=b.length,s=N.length,v=l.length,m=t-n,f=m>0,J=n===0,R=m>1&&!f&&!J;if(R)return k;var L=f&&(b===l||l===N),M=0,$=void 0,D=void 0;if(L)M=k-m;else{var G=l.toLowerCase(),A=x.toLowerCase(),T=A.substr(0,k).split(d),_=T.filter(function(I){return G.indexOf(I)!==-1});D=_[_.length-1];var X=y.substr(0,_.length).split(d).filter(function(I){return I!==i}).length,V=N.substr(0,_.length).split(d).filter(function(I){return I!==i}).length,z=V!==X,K=y[_.length-1]!==void 0&&N[_.length-2]!==void 0&&y[_.length-1]!==i&&y[_.length-1]!==N[_.length-1]&&y[_.length-1]===N[_.length-2];!f&&(z||K)&&X>0&&N.indexOf(D)>-1&&x[k]!==void 0&&($=!0,D=x[k]);for(var ee=w.map(function(I){return G[I]}),te=ee.filter(function(I){return I===D}).length,Q=_.filter(function(I){return I===D}).length,oe=N.substr(0,N.indexOf(i)).split(d).filter(function(I,ae){return I===D&&x[ae]!==I}).length,ne=oe+Q+te+($?1:0),Z=0,q=0;q<v;q++){var H=G[q];if(M=q+1,H===D&&Z++,Z>=ne)break}}if(f){for(var F=M,S=M;S<=s;S++)if(N[S]===i&&(F=S),N[S]===i||c.indexOf(S)!==-1||S===s)return F}else if($){for(var W=M-1;W>=0;W--)if(l[W]===D||c.indexOf(W)!==-1||W===0)return W}else for(var U=M;U>=0;U--)if(N[U-1]===i||c.indexOf(U)!==-1||U===0)return U}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=[],d=""},function(u,r,o){function a(t){return t&&t.__esModule?t:{default:t}}function d(t){var n={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:n,update:function(s){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,m=v.inputElement,f=v.mask,J=v.guide,R=v.pipe,L=v.placeholderChar,M=L===void 0?i.placeholderChar:L,$=v.keepCharPositions,D=$!==void 0&&$,G=v.showMask,A=G!==void 0&&G;if(typeof s>"u"&&(s=m.value),s!==n.previousConformedValue){(typeof f>"u"?"undefined":g(f))===w&&f.pipe!==void 0&&f.mask!==void 0&&(R=f.pipe,f=f.mask);var T=void 0,_=void 0;if(f instanceof Array&&(T=(0,x.convertMaskToPlaceholder)(f,M)),f!==!1){var X=h(s),V=m.selectionEnd,z=n.previousConformedValue,K=n.previousPlaceholder,ee=void 0;if((typeof f>"u"?"undefined":g(f))===i.strFunction){if(_=f(X,{currentCaretPosition:V,previousConformedValue:z,placeholderChar:M}),_===!1)return;var te=(0,x.processCaretTraps)(_),Q=te.maskWithoutCaretTraps,oe=te.indexes;_=Q,ee=oe,T=(0,x.convertMaskToPlaceholder)(_,M)}else _=f;var ne={previousConformedValue:z,guide:J,placeholderChar:M,pipe:R,placeholder:T,currentCaretPosition:V,keepCharPositions:D},Z=(0,l.default)(X,_,ne),q=Z.conformedValue,H=(typeof R>"u"?"undefined":g(R))===i.strFunction,F={};H&&(F=R(q,b({rawValue:X},ne)),F===!1?F={value:z,rejected:!0}:(0,x.isString)(F)&&(F={value:F}));var S=H?F.value:q,W=(0,C.default)({previousConformedValue:z,previousPlaceholder:K,conformedValue:S,placeholder:T,rawValue:X,currentCaretPosition:V,placeholderChar:M,indexesOfPipedChars:F.indexesOfPipedChars,caretTrapIndexes:ee}),U=S===T&&W===0,I=A?T:N,ae=U?I:S;n.previousConformedValue=ae,n.previousPlaceholder=T,m.value!==ae&&(m.value=ae,p(m,W))}}}}}function p(t,n){document.activeElement===t&&(B?c(function(){return t.setSelectionRange(n,n,Y)},0):t.setSelectionRange(n,n,Y))}function h(t){if((0,x.isString)(t))return t;if((0,x.isNumber)(t))return String(t);if(t==null)return N;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(t))}Object.defineProperty(r,"__esModule",{value:!0});var b=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var v in s)Object.prototype.hasOwnProperty.call(s,v)&&(t[v]=s[v])}return t},g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.default=d;var y=o(4),C=a(y),k=o(3),l=a(k),x=o(2),i=o(1),N="",Y="none",w="object",B=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),c=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout},function(u,r){function o(d){return function(){return d}}var a=function(){};a.thatReturns=o,a.thatReturnsFalse=o(!1),a.thatReturnsTrue=o(!0),a.thatReturnsNull=o(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(d){return d},u.exports=a},function(u,r,o){function a(d,p,h,b,g,y,C,k){if(!d){var l;if(p===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[h,b,g,y,C,k],i=0;l=new Error(p.replace(/%s/g,function(){return x[i++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}u.exports=a},function(u,r,o){var a=o(6),d=o(7),p=o(10);u.exports=function(){function h(y,C,k,l,x,i){i!==p&&d(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function b(){return h}h.isRequired=h;var g={array:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:b,element:h,instanceOf:b,node:h,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return g.checkPropTypes=a,g.PropTypes=g,g}},function(u,r,o){u.exports=o(8)()},function(u,r){var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";u.exports=o},function(u,r){u.exports=P}])})})(fe);var Ve=fe.exports;const pe=ve(Ve),Fe="_form_evz1p_1",Re="_formGroup_evz1p_11",Ae="_textField_evz1p_25",Ge="_checkbox_evz1p_40",qe="_btn_evz1p_57",j={form:Fe,formGroup:Re,textField:Ae,checkbox:Ge,btn:qe},Be=({onSubmit:O,initialState:E})=>{const{state:P,handleChange:u,handleSubmit:r}=de({initialState:E,onSubmit:O}),{title:o,director:a,favorite:d,genre:p,releaseDate:h}=P,b=[/\d/,/\d/,/\d/,/\d/];return e.jsxs("form",{onSubmit:r,className:j.form,encType:"multipart/form-data",children:[e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Movie title"}),e.jsx("input",{value:o||"",name:"title",onChange:u,className:j.textField,placeholder:"Movie title",required:!0})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Movie director"}),e.jsx("input",{value:a||"",name:"director",onChange:u,className:j.textField,placeholder:"Movie director",required:!0})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Favorite"}),e.jsx("input",{checked:!!d,name:"favorite",onChange:u,className:j.checkbox,type:"checkbox"})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Movie genre"}),e.jsxs("select",{name:"genre",value:p||"fantastic",onChange:u,className:j.textField,children:[e.jsx("option",{value:"fantastic",children:"Fantastic"}),e.jsx("option",{value:"love story",children:"Love story"})]})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Movie release date"}),e.jsx(pe,{mask:b,value:h||"",name:"releaseDate",onChange:u,className:j.textField,placeholder:"YYYY",required:!0})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Poster"}),e.jsx("input",{name:"poster",type:"file",onChange:u})]}),e.jsx("button",{className:j.btn,type:"submit",children:"Edit Movie"})]})},Le=({movie:O,className:E})=>{const[P,u]=se.useState(!1),r=ce(),o=()=>u(!0),a=()=>u(!1),d=p=>{r(ge({id:O._id,data:p})),a()};return e.jsxs("div",{children:[e.jsx("button",{className:E,onClick:o,children:"Edit"}),P&&e.jsx(De,{close:a,title:"Edit Movie",content:e.jsx(Be,{initialState:{title:O.title,director:O.director,favorite:O.favorite,genre:O.genre,releaseDate:O.releaseDate,poster:null},onSubmit:d})})]})},$e="http://localhost:4444",We=({items:O,onDeleteMovie:E})=>{const P=se.useRef(null),u=O.map(({_id:r,title:o,director:a,genre:d,poster:p,releaseDate:h,favorite:b})=>e.jsxs("li",{className:re.listItem,children:[p&&e.jsx("div",{className:re.posterWrapper,children:e.jsx("img",{ref:P,className:re.listItemPoster,src:`${$e}/${p}`,alt:`Poster for ${o}`})}),e.jsxs("div",{className:re.listItemInfo,children:[e.jsxs("h2",{children:["Назва: ",o]}),e.jsxs("span",{children:["Director: ",a]}),e.jsxs("span",{children:["Genre: ",d]}),e.jsxs("span",{children:["Release: ",h]})]}),e.jsx("button",{className:re.button,onClick:()=>E(r),children:"Delete"}),e.jsx(Le,{movie:{_id:r,title:o,director:a,genre:d,poster:p,releaseDate:h,favorite:b},className:re.btnEdit})]},r));return e.jsx("ol",{className:re.list,children:u})},Ue={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:"",poster:null},Ye=({onSubmit:O})=>{const{state:E,handleChange:P,reset:u}=de({initialState:Ue,onSubmit:O}),r=b=>{b.preventDefault();const g=new FormData(b.currentTarget);g.set("favorite",E.favorite),O(g),u()},{title:o,director:a,favorite:d,releaseDate:p}=E,h=[/\d/,/\d/,/\d/,/\d/];return e.jsxs("form",{onSubmit:r,className:j.form,encType:"multipart/form-data",children:[e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Movie title"}),e.jsx("input",{value:o,name:"title",onChange:P,className:j.textField,placeholder:"Movie title",required:!0})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Movie director"}),e.jsx("input",{value:a,name:"director",onChange:P,className:j.textField,placeholder:"Movie director",required:!0})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Favorite"}),e.jsx("input",{checked:d,name:"favorite",onChange:P,className:j.checkbox,type:"checkbox"})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Movie genre"}),e.jsxs("select",{name:"genre",onChange:P,children:[e.jsx("option",{value:"fantastic",children:"Fantastic"}),e.jsx("option",{value:"love story",children:"Love story"})]})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Movie release date"}),e.jsx(pe,{mask:h,value:p,name:"releaseDate",onChange:P,className:j.textField,placeholder:"YYYY",required:!0})]}),e.jsxs("div",{className:j.formGroup,children:[e.jsx("label",{children:"Poster"}),e.jsx("input",{name:"poster",type:"file"})]}),e.jsx("button",{className:j.btn,type:"submit",children:"Add movie"})]})},Ke="_wrapper_2saq2_1",Xe="_title_2saq2_5",ze="_blocks_2saq2_12",ue={wrapper:Ke,title:Xe,blocks:ze},Qe=()=>{const O=ye(ke),E=ce();se.useEffect(()=>{E(xe())},[E]);const P=r=>{E(be(r))},u=r=>{E(je(r))};return e.jsx("div",{className:ue.wrapper,children:e.jsxs("div",{className:ue.blocks,children:[e.jsx(le,{title:"Add movie",children:e.jsx(Ye,{onSubmit:P})}),e.jsx(le,{title:"Movie list",children:e.jsx(We,{items:O,onDeleteMovie:u})})]})})},et=()=>e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"page-title",children:"My movies page"}),e.jsx(Qe,{})]});export{et as default};
