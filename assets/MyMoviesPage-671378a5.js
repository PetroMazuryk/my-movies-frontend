import{j as l,r as ie,c as fe,g as de,u as pe,a as he,f as ve,b as me,d as ye}from"./index-f84bf6e4.js";import{u as ge}from"./useForm-46d83623.js";import{g as be}from"./movies-selectors-0e51b1fc.js";const xe="_wrapper_kfp2p_1",ke="_title_kfp2p_5",se={wrapper:xe,title:ke},le=({title:K,children:A})=>l.jsxs("div",{className:se.wrapper,children:[l.jsx("h4",{className:se.title,children:K}),A]}),_e="_list_18nq8_1",Ce="_listItem_18nq8_17",je="_listItemPoster_18nq8_23",ae={list:_e,listItem:Ce,listItemPoster:je},Te="http://localhost:4444",Oe=({items:K,onDeleteMovie:A})=>{const D=ie.useRef(null),y=K.map(({_id:r,title:i,director:u,genre:f,poster:v})=>l.jsxs("li",{className:ae.listItem,children:[v&&l.jsx("img",{ref:D,className:ae.listItemPoster,src:`${Te}/${v}`,alt:`Poster for ${i}`}),"Title: ",i,". Director: ",u,". Genre: ",f,l.jsx("button",{onClick:()=>A(r),children:"Delete"})]},r));return l.jsx("ol",{className:ae.list,children:y})};var ce={exports:{}};(function(K,A){(function(D,y){K.exports=y(ie)})(fe,function(D){return function(y){function r(u){if(i[u])return i[u].exports;var f=i[u]={exports:{},id:u,loaded:!1};return y[u].call(f.exports,f,f.exports,r),f.loaded=!0,f.exports}var i={};return r.m=y,r.c=i,r.p="",r(0)}([function(y,r,i){function u(s){return s&&s.__esModule?s:{default:s}}function f(s,e){var t={};for(var n in s)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);return t}function v(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function m(s,e){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?s:e}function x(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(s,e):s.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0}),r.conformToMask=void 0;var h=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},g=function(){function s(e,t){for(var n=0;n<t.length;n++){var p=t[n];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}}(),C=i(3);Object.defineProperty(r,"conformToMask",{enumerable:!0,get:function(){return u(C).default}});var k=i(11),a=u(k),b=i(9),o=u(b),T=i(5),Q=u(T),P=i(2),B=function(s){function e(){var t;v(this,e);for(var n=arguments.length,p=Array(n),d=0;d<n;d++)p[d]=arguments[d];var c=m(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(p)));return c.setRef=c.setRef.bind(c),c.onBlur=c.onBlur.bind(c),c.onChange=c.onChange.bind(c),c}return x(e,s),g(e,[{key:"setRef",value:function(t){this.inputElement=t}},{key:"initTextMask",value:function(){var t=this.props,n=this.props.value;this.textMaskInputElement=(0,Q.default)(h({inputElement:this.inputElement},t)),this.textMaskInputElement.update(n)}},{key:"componentDidMount",value:function(){this.initTextMask()}},{key:"componentDidUpdate",value:function(t){var n=this.props,p=n.value,d=n.pipe,c=n.mask,z=n.guide,V=n.placeholderChar,$=n.showMask,j={guide:z,placeholderChar:V,showMask:$},G=typeof d=="function"&&typeof t.pipe=="function"?d.toString()!==t.pipe.toString():(0,P.isNil)(d)&&!(0,P.isNil)(t.pipe)||!(0,P.isNil)(d)&&(0,P.isNil)(t.pipe),N=c.toString()!==t.mask.toString(),R=Object.keys(j).some(function(O){return j[O]!==t[O]})||N||G,I=p!==this.inputElement.value;(I||R)&&this.initTextMask()}},{key:"render",value:function(){var n=this.props,p=n.render,d=f(n,["render"]);return delete d.mask,delete d.guide,delete d.pipe,delete d.placeholderChar,delete d.keepCharPositions,delete d.value,delete d.onBlur,delete d.onChange,delete d.showMask,p(this.setRef,h({onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value},d))}},{key:"onChange",value:function(t){this.textMaskInputElement.update(),typeof this.props.onChange=="function"&&this.props.onChange(t)}},{key:"onBlur",value:function(t){typeof this.props.onBlur=="function"&&this.props.onBlur(t)}}]),e}(a.default.PureComponent);r.default=B,B.propTypes={mask:o.default.oneOfType([o.default.array,o.default.func,o.default.bool,o.default.shape({mask:o.default.oneOfType([o.default.array,o.default.func]),pipe:o.default.func})]).isRequired,guide:o.default.bool,value:o.default.oneOfType([o.default.string,o.default.number]),pipe:o.default.func,placeholderChar:o.default.string,keepCharPositions:o.default.bool,showMask:o.default.bool},B.defaultProps={render:function(s,e){return a.default.createElement("input",h({ref:s},e))}}},function(y,r){Object.defineProperty(r,"__esModule",{value:!0}),r.placeholderChar="_",r.strFunction="function"},function(y,r,i){function u(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.placeholderChar;if(!f(a))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(a.indexOf(b)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(b)+`

`)+("The mask that was received is: "+JSON.stringify(a)));return a.map(function(o){return o instanceof RegExp?b:o}).join("")}function f(a){return Array.isArray&&Array.isArray(a)||a instanceof Array}function v(a){return typeof a=="string"||a instanceof String}function m(a){return typeof a=="number"&&a.length===void 0&&!isNaN(a)}function x(a){return typeof a>"u"||a===null}function h(a){for(var b=[],o=void 0;o=a.indexOf(k),o!==-1;)b.push(o),a.splice(o,1);return{maskWithoutCaretTraps:a,indexes:b}}Object.defineProperty(r,"__esModule",{value:!0}),r.convertMaskToPlaceholder=u,r.isArray=f,r.isString=v,r.isNumber=m,r.isNil=x,r.processCaretTraps=h;var g=i(1),C=[],k="[]"},function(y,r,i){function u(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,v.isArray)(C)){if((typeof C>"u"?"undefined":f(C))!==m.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");C=C(g,k),C=(0,v.processCaretTraps)(C).maskWithoutCaretTraps}var a=k.guide,b=a===void 0||a,o=k.previousConformedValue,T=o===void 0?h:o,Q=k.placeholderChar,P=Q===void 0?m.placeholderChar:Q,B=k.placeholder,s=B===void 0?(0,v.convertMaskToPlaceholder)(C,P):B,e=k.currentCaretPosition,t=k.keepCharPositions,n=b===!1&&T!==void 0,p=g.length,d=T.length,c=s.length,z=C.length,V=p-d,$=V>0,j=e+($?-V:0),G=j+Math.abs(V);if(t===!0&&!$){for(var N=h,R=j;R<G;R++)s[R]===P&&(N+=P);g=g.slice(0,j)+N+g.slice(j,p)}for(var I=g.split(h).map(function(L,U){return{char:L,isNew:U>=j&&U<G}}),O=p-1;O>=0;O--){var _=I[O].char;if(_!==P){var X=O>=j&&d===z;_===s[X?O-V:O]&&I.splice(O,1)}}var S=h,Z=!1;e:for(var W=0;W<c;W++){var ee=s[W];if(ee===P){if(I.length>0)for(;I.length>0;){var te=I.shift(),Y=te.char,ne=te.isNew;if(Y===P&&n!==!0){S+=P;continue e}if(C[W].test(Y)){if(t===!0&&ne!==!1&&T!==h&&b!==!1&&$){for(var re=I.length,H=null,q=0;q<re;q++){var J=I[q];if(J.char!==P&&J.isNew===!1)break;if(J.char===P){H=q;break}}H!==null?(S+=Y,I.splice(H,1)):W--}else S+=Y;continue e}Z=!0}n===!1&&(S+=s.substr(W,c));break}S+=ee}if(n&&$===!1){for(var E=null,M=0;M<S.length;M++)s[M]===P&&(E=M);S=E!==null?S.substr(0,E+1):h}return{conformedValue:S,meta:{someCharsRejected:Z}}}Object.defineProperty(r,"__esModule",{value:!0});var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g};r.default=u;var v=i(2),m=i(1),x=[],h=""},function(y,r){function i(v){var m=v.previousConformedValue,x=m===void 0?f:m,h=v.previousPlaceholder,g=h===void 0?f:h,C=v.currentCaretPosition,k=C===void 0?0:C,a=v.conformedValue,b=v.rawValue,o=v.placeholderChar,T=v.placeholder,Q=v.indexesOfPipedChars,P=Q===void 0?u:Q,B=v.caretTrapIndexes,s=B===void 0?u:B;if(k===0||!b.length)return 0;var e=b.length,t=x.length,n=T.length,p=a.length,d=e-t,c=d>0,z=t===0,V=d>1&&!c&&!z;if(V)return k;var $=c&&(x===a||a===T),j=0,G=void 0,N=void 0;if($)j=k-d;else{var R=a.toLowerCase(),I=b.toLowerCase(),O=I.substr(0,k).split(f),_=O.filter(function(w){return R.indexOf(w)!==-1});N=_[_.length-1];var X=g.substr(0,_.length).split(f).filter(function(w){return w!==o}).length,S=T.substr(0,_.length).split(f).filter(function(w){return w!==o}).length,Z=S!==X,W=g[_.length-1]!==void 0&&T[_.length-2]!==void 0&&g[_.length-1]!==o&&g[_.length-1]!==T[_.length-1]&&g[_.length-1]===T[_.length-2];!c&&(Z||W)&&X>0&&T.indexOf(N)>-1&&b[k]!==void 0&&(G=!0,N=b[k]);for(var ee=P.map(function(w){return R[w]}),te=ee.filter(function(w){return w===N}).length,Y=_.filter(function(w){return w===N}).length,ne=T.substr(0,T.indexOf(o)).split(f).filter(function(w,oe){return w===N&&b[oe]!==w}).length,re=ne+Y+te+(G?1:0),H=0,q=0;q<p;q++){var J=R[q];if(j=q+1,J===N&&H++,H>=re)break}}if(c){for(var E=j,M=j;M<=n;M++)if(T[M]===o&&(E=M),T[M]===o||s.indexOf(M)!==-1||M===n)return E}else if(G){for(var L=j-1;L>=0;L--)if(a[L]===N||s.indexOf(L)!==-1||L===0)return L}else for(var U=j;U>=0;U--)if(T[U-1]===o||s.indexOf(U)!==-1||U===0)return U}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var u=[],f=""},function(y,r,i){function u(e){return e&&e.__esModule?e:{default:e}}function f(e){var t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update:function(n){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,d=p.inputElement,c=p.mask,z=p.guide,V=p.pipe,$=p.placeholderChar,j=$===void 0?o.placeholderChar:$,G=p.keepCharPositions,N=G!==void 0&&G,R=p.showMask,I=R!==void 0&&R;if(typeof n>"u"&&(n=d.value),n!==t.previousConformedValue){(typeof c>"u"?"undefined":h(c))===P&&c.pipe!==void 0&&c.mask!==void 0&&(V=c.pipe,c=c.mask);var O=void 0,_=void 0;if(c instanceof Array&&(O=(0,b.convertMaskToPlaceholder)(c,j)),c!==!1){var X=m(n),S=d.selectionEnd,Z=t.previousConformedValue,W=t.previousPlaceholder,ee=void 0;if((typeof c>"u"?"undefined":h(c))===o.strFunction){if(_=c(X,{currentCaretPosition:S,previousConformedValue:Z,placeholderChar:j}),_===!1)return;var te=(0,b.processCaretTraps)(_),Y=te.maskWithoutCaretTraps,ne=te.indexes;_=Y,ee=ne,O=(0,b.convertMaskToPlaceholder)(_,j)}else _=c;var re={previousConformedValue:Z,guide:z,placeholderChar:j,pipe:V,placeholder:O,currentCaretPosition:S,keepCharPositions:N},H=(0,a.default)(X,_,re),q=H.conformedValue,J=(typeof V>"u"?"undefined":h(V))===o.strFunction,E={};J&&(E=V(q,x({rawValue:X},re)),E===!1?E={value:Z,rejected:!0}:(0,b.isString)(E)&&(E={value:E}));var M=J?E.value:q,L=(0,C.default)({previousConformedValue:Z,previousPlaceholder:W,conformedValue:M,placeholder:O,rawValue:X,currentCaretPosition:S,placeholderChar:j,indexesOfPipedChars:E.indexesOfPipedChars,caretTrapIndexes:ee}),U=M===O&&L===0,w=I?O:T,oe=U?w:M;t.previousConformedValue=oe,t.previousPlaceholder=O,d.value!==oe&&(d.value=oe,v(d,L))}}}}}function v(e,t){document.activeElement===e&&(B?s(function(){return e.setSelectionRange(t,t,Q)},0):e.setSelectionRange(t,t,Q))}function m(e){if((0,b.isString)(e))return e;if((0,b.isNumber)(e))return String(e);if(e==null)return T;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(e))}Object.defineProperty(r,"__esModule",{value:!0});var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(e[p]=n[p])}return e},h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.default=f;var g=i(4),C=u(g),k=i(3),a=u(k),b=i(2),o=i(1),T="",Q="none",P="object",B=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),s=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout},function(y,r){function i(f){return function(){return f}}var u=function(){};u.thatReturns=i,u.thatReturnsFalse=i(!1),u.thatReturnsTrue=i(!0),u.thatReturnsNull=i(null),u.thatReturnsThis=function(){return this},u.thatReturnsArgument=function(f){return f},y.exports=u},function(y,r,i){function u(f,v,m,x,h,g,C,k){if(!f){var a;if(v===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[m,x,h,g,C,k],o=0;a=new Error(v.replace(/%s/g,function(){return b[o++]})),a.name="Invariant Violation"}throw a.framesToPop=1,a}}y.exports=u},function(y,r,i){var u=i(6),f=i(7),v=i(10);y.exports=function(){function m(g,C,k,a,b,o){o!==v&&f(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function x(){return m}m.isRequired=m;var h={array:m,bool:m,func:m,number:m,object:m,string:m,symbol:m,any:m,arrayOf:x,element:m,instanceOf:x,node:m,objectOf:x,oneOf:x,oneOfType:x,shape:x,exact:x};return h.checkPropTypes=u,h.PropTypes=h,h}},function(y,r,i){y.exports=i(8)()},function(y,r){var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";y.exports=i},function(y,r){y.exports=D}])})})(ce);var Pe=ce.exports;const Me=de(Pe),we={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:""},Ne="_form_1a0e9_1",Se="_formGroup_1a0e9_11",Ee="_textField_1a0e9_25",Ve="_checkbox_1a0e9_40",Ie="_btn_1a0e9_57",F={form:Ne,formGroup:Se,textField:Ee,checkbox:Ve,btn:Ie},Ae=({onSubmit:K})=>{const{state:A,handleChange:D,reset:y}=ge({initialState:we,onSubmit:K}),r=x=>{x.preventDefault();const h=new FormData(x.currentTarget);h.set("favorite",A.favorite),K(h),y()},{title:i,director:u,favorite:f,releaseDate:v}=A,m=[/\d/,/\d/,/\d/,/\d/];return l.jsxs("form",{onSubmit:r,className:F.form,encType:"multipart/form-data",children:[l.jsxs("div",{className:F.formGroup,children:[l.jsx("label",{children:"Movie title"}),l.jsx("input",{value:i,name:"title",onChange:D,className:F.textField,placeholder:"Movie title",required:!0})]}),l.jsxs("div",{className:F.formGroup,children:[l.jsx("label",{children:"Movie director"}),l.jsx("input",{value:u,name:"director",onChange:D,className:F.textField,placeholder:"Movie director",required:!0})]}),l.jsxs("div",{className:F.formGroup,children:[l.jsx("label",{children:"Favorite"}),l.jsx("input",{checked:f,name:"favorite",onChange:D,className:F.checkbox,type:"checkbox"})]}),l.jsxs("div",{className:F.formGroup,children:[l.jsx("label",{children:"Movie genre"}),l.jsxs("select",{name:"genre",onChange:D,children:[l.jsx("option",{value:"fantastic",children:"Fantastic"}),l.jsx("option",{value:"love story",children:"Love story"})]})]}),l.jsxs("div",{className:F.formGroup,children:[l.jsx("label",{children:"Movie release date"}),l.jsx(Me,{mask:m,value:v,name:"releaseDate",onChange:D,className:F.textField,placeholder:"YYYY",required:!0})]}),l.jsxs("div",{className:F.formGroup,children:[l.jsx("label",{children:"Poster"}),l.jsx("input",{name:"poster",type:"file"})]}),l.jsx("button",{className:F.btn,type:"submit",children:"Add movie"})]})},De="_wrapper_2saq2_1",Re="_title_2saq2_5",qe="_blocks_2saq2_12",ue={wrapper:De,title:Re,blocks:qe},Fe=()=>{const K=pe(be),A=he();ie.useEffect(()=>{A(ve())},[A]);const D=r=>{A(me(r))},y=r=>{A(ye(r))};return l.jsx("div",{className:ue.wrapper,children:l.jsxs("div",{className:ue.blocks,children:[l.jsx(le,{title:"Add movie",children:l.jsx(Ae,{onSubmit:D})}),l.jsx(le,{title:"Movie list",children:l.jsx(Oe,{items:K,onDeleteMovie:y})})]})})},Le=()=>l.jsxs("div",{className:"container",children:[l.jsx("h1",{className:"page-title",children:"My movies page"}),l.jsx(Fe,{})]});export{Le as default};
