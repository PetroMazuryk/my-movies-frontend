import{j as u,r as ie,c as ue,e as ce,g as de,a as fe,h as pe,i as he}from"./index-80213ada.js";import{u as ve}from"./useForm-8e714e62.js";const me="_wrapper_1bkdh_1",ye="_title_1bkdh_5",se={wrapper:me,title:ye},Ae=({title:T,children:U})=>u.jsxs("div",{className:se.wrapper,children:[u.jsx("h4",{className:se.title,children:T}),U]}),ge="_titleText_1cc8t_1",be={titleText:ge},xe=({children:T})=>u.jsx("h2",{className:be.titleText,children:T}),ke="_overlay_19ka7_1",Ce="_modal_19ka7_14",_e="_close_19ka7_26",ae={overlay:ke,modal:Ce,close:_e},je=document.getElementById("modal-root"),Te=({close:T,title:U,content:K,actions:h})=>{const r=({target:o,currentTarget:i,code:c})=>{(o===i||c==="Escape")&&T()};return ie.useEffect(()=>{const o=i=>r(i);return document.body.addEventListener("keydown",o),()=>document.body.removeEventListener("keydown",o)},[]),ue.createPortal(u.jsx("div",{onClick:r,className:ae.overlay,children:u.jsxs("div",{className:ae.modal,children:[u.jsx("span",{onClick:T,className:ae.close,children:"X"}),U&&u.jsx(xe,{children:"Edit Movie"}),K&&u.jsx("div",{children:K}),h&&u.jsx("div",{className:ae.actions,children:h})]})}),je)};var le={exports:{}};(function(T,U){(function(K,h){T.exports=h(ie)})(ce,function(K){return function(h){function r(i){if(o[i])return o[i].exports;var c=o[i]={exports:{},id:i,loaded:!1};return h[i].call(c.exports,c,c.exports,r),c.loaded=!0,c.exports}var o={};return r.m=h,r.c=o,r.p="",r(0)}([function(h,r,o){function i(l){return l&&l.__esModule?l:{default:l}}function c(l,e){var t={};for(var n in l)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);return t}function g(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function m(l,e){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?l:e}function _(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(l,e):l.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0}),r.conformToMask=void 0;var y=Object.assign||function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(l[n]=t[n])}return l},v=function(){function l(e,t){for(var n=0;n<t.length;n++){var p=t[n];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}}(),x=o(3);Object.defineProperty(r,"conformToMask",{enumerable:!0,get:function(){return i(x).default}});var k=o(11),s=i(k),b=o(9),a=i(b),O=o(5),X=i(O),P=o(2),I=function(l){function e(){var t;g(this,e);for(var n=arguments.length,p=Array(n),f=0;f<n;f++)p[f]=arguments[f];var d=m(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(p)));return d.setRef=d.setRef.bind(d),d.onBlur=d.onBlur.bind(d),d.onChange=d.onChange.bind(d),d}return _(e,l),v(e,[{key:"setRef",value:function(t){this.inputElement=t}},{key:"initTextMask",value:function(){var t=this.props,n=this.props.value;this.textMaskInputElement=(0,X.default)(y({inputElement:this.inputElement},t)),this.textMaskInputElement.update(n)}},{key:"componentDidMount",value:function(){this.initTextMask()}},{key:"componentDidUpdate",value:function(t){var n=this.props,p=n.value,f=n.pipe,d=n.mask,z=n.guide,D=n.placeholderChar,q=n.showMask,j={guide:z,placeholderChar:D,showMask:q},G=typeof f=="function"&&typeof t.pipe=="function"?f.toString()!==t.pipe.toString():(0,P.isNil)(f)&&!(0,P.isNil)(t.pipe)||!(0,P.isNil)(f)&&(0,P.isNil)(t.pipe),N=d.toString()!==t.mask.toString(),A=Object.keys(j).some(function(M){return j[M]!==t[M]})||N||G,R=p!==this.inputElement.value;(R||A)&&this.initTextMask()}},{key:"render",value:function(){var n=this.props,p=n.render,f=c(n,["render"]);return delete f.mask,delete f.guide,delete f.pipe,delete f.placeholderChar,delete f.keepCharPositions,delete f.value,delete f.onBlur,delete f.onChange,delete f.showMask,p(this.setRef,y({onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value},f))}},{key:"onChange",value:function(t){this.textMaskInputElement.update(),typeof this.props.onChange=="function"&&this.props.onChange(t)}},{key:"onBlur",value:function(t){typeof this.props.onBlur=="function"&&this.props.onBlur(t)}}]),e}(s.default.PureComponent);r.default=I,I.propTypes={mask:a.default.oneOfType([a.default.array,a.default.func,a.default.bool,a.default.shape({mask:a.default.oneOfType([a.default.array,a.default.func]),pipe:a.default.func})]).isRequired,guide:a.default.bool,value:a.default.oneOfType([a.default.string,a.default.number]),pipe:a.default.func,placeholderChar:a.default.string,keepCharPositions:a.default.bool,showMask:a.default.bool},I.defaultProps={render:function(l,e){return s.default.createElement("input",y({ref:l},e))}}},function(h,r){Object.defineProperty(r,"__esModule",{value:!0}),r.placeholderChar="_",r.strFunction="function"},function(h,r,o){function i(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v.placeholderChar;if(!c(s))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(s.indexOf(b)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(b)+`

`)+("The mask that was received is: "+JSON.stringify(s)));return s.map(function(a){return a instanceof RegExp?b:a}).join("")}function c(s){return Array.isArray&&Array.isArray(s)||s instanceof Array}function g(s){return typeof s=="string"||s instanceof String}function m(s){return typeof s=="number"&&s.length===void 0&&!isNaN(s)}function _(s){return typeof s>"u"||s===null}function y(s){for(var b=[],a=void 0;a=s.indexOf(k),a!==-1;)b.push(a),s.splice(a,1);return{maskWithoutCaretTraps:s,indexes:b}}Object.defineProperty(r,"__esModule",{value:!0}),r.convertMaskToPlaceholder=i,r.isArray=c,r.isString=g,r.isNumber=m,r.isNil=_,r.processCaretTraps=y;var v=o(1),x=[],k="[]"},function(h,r,o){function i(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,g.isArray)(x)){if((typeof x>"u"?"undefined":c(x))!==m.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");x=x(v,k),x=(0,g.processCaretTraps)(x).maskWithoutCaretTraps}var s=k.guide,b=s===void 0||s,a=k.previousConformedValue,O=a===void 0?y:a,X=k.placeholderChar,P=X===void 0?m.placeholderChar:X,I=k.placeholder,l=I===void 0?(0,g.convertMaskToPlaceholder)(x,P):I,e=k.currentCaretPosition,t=k.keepCharPositions,n=b===!1&&O!==void 0,p=v.length,f=O.length,d=l.length,z=x.length,D=p-f,q=D>0,j=e+(q?-D:0),G=j+Math.abs(D);if(t===!0&&!q){for(var N=y,A=j;A<G;A++)l[A]===P&&(N+=P);v=v.slice(0,j)+N+v.slice(j,p)}for(var R=v.split(y).map(function(L,$){return{char:L,isNew:$>=j&&$<G}}),M=p-1;M>=0;M--){var C=R[M].char;if(C!==P){var W=M>=j&&f===z;C===l[W?M-D:M]&&R.splice(M,1)}}var S=y,Z=!1;e:for(var Q=0;Q<d;Q++){var ee=l[Q];if(ee===P){if(R.length>0)for(;R.length>0;){var te=R.shift(),Y=te.char,ne=te.isNew;if(Y===P&&n!==!0){S+=P;continue e}if(x[Q].test(Y)){if(t===!0&&ne!==!1&&O!==y&&b!==!1&&q){for(var re=R.length,H=null,B=0;B<re;B++){var J=R[B];if(J.char!==P&&J.isNew===!1)break;if(J.char===P){H=B;break}}H!==null?(S+=Y,R.splice(H,1)):Q--}else S+=Y;continue e}Z=!0}n===!1&&(S+=l.substr(Q,d));break}S+=ee}if(n&&q===!1){for(var V=null,w=0;w<S.length;w++)l[w]===P&&(V=w);S=V!==null?S.substr(0,V+1):y}return{conformedValue:S,meta:{someCharsRejected:Z}}}Object.defineProperty(r,"__esModule",{value:!0});var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v};r.default=i;var g=o(2),m=o(1),_=[],y=""},function(h,r){function o(g){var m=g.previousConformedValue,_=m===void 0?c:m,y=g.previousPlaceholder,v=y===void 0?c:y,x=g.currentCaretPosition,k=x===void 0?0:x,s=g.conformedValue,b=g.rawValue,a=g.placeholderChar,O=g.placeholder,X=g.indexesOfPipedChars,P=X===void 0?i:X,I=g.caretTrapIndexes,l=I===void 0?i:I;if(k===0||!b.length)return 0;var e=b.length,t=_.length,n=O.length,p=s.length,f=e-t,d=f>0,z=t===0,D=f>1&&!d&&!z;if(D)return k;var q=d&&(_===s||s===O),j=0,G=void 0,N=void 0;if(q)j=k-f;else{var A=s.toLowerCase(),R=b.toLowerCase(),M=R.substr(0,k).split(c),C=M.filter(function(E){return A.indexOf(E)!==-1});N=C[C.length-1];var W=v.substr(0,C.length).split(c).filter(function(E){return E!==a}).length,S=O.substr(0,C.length).split(c).filter(function(E){return E!==a}).length,Z=S!==W,Q=v[C.length-1]!==void 0&&O[C.length-2]!==void 0&&v[C.length-1]!==a&&v[C.length-1]!==O[C.length-1]&&v[C.length-1]===O[C.length-2];!d&&(Z||Q)&&W>0&&O.indexOf(N)>-1&&b[k]!==void 0&&(G=!0,N=b[k]);for(var ee=P.map(function(E){return A[E]}),te=ee.filter(function(E){return E===N}).length,Y=C.filter(function(E){return E===N}).length,ne=O.substr(0,O.indexOf(a)).split(c).filter(function(E,oe){return E===N&&b[oe]!==E}).length,re=ne+Y+te+(G?1:0),H=0,B=0;B<p;B++){var J=A[B];if(j=B+1,J===N&&H++,H>=re)break}}if(d){for(var V=j,w=j;w<=n;w++)if(O[w]===a&&(V=w),O[w]===a||l.indexOf(w)!==-1||w===n)return V}else if(G){for(var L=j-1;L>=0;L--)if(s[L]===N||l.indexOf(L)!==-1||L===0)return L}else for(var $=j;$>=0;$--)if(O[$-1]===a||l.indexOf($)!==-1||$===0)return $}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var i=[],c=""},function(h,r,o){function i(e){return e&&e.__esModule?e:{default:e}}function c(e){var t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update:function(n){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,f=p.inputElement,d=p.mask,z=p.guide,D=p.pipe,q=p.placeholderChar,j=q===void 0?a.placeholderChar:q,G=p.keepCharPositions,N=G!==void 0&&G,A=p.showMask,R=A!==void 0&&A;if(typeof n>"u"&&(n=f.value),n!==t.previousConformedValue){(typeof d>"u"?"undefined":y(d))===P&&d.pipe!==void 0&&d.mask!==void 0&&(D=d.pipe,d=d.mask);var M=void 0,C=void 0;if(d instanceof Array&&(M=(0,b.convertMaskToPlaceholder)(d,j)),d!==!1){var W=m(n),S=f.selectionEnd,Z=t.previousConformedValue,Q=t.previousPlaceholder,ee=void 0;if((typeof d>"u"?"undefined":y(d))===a.strFunction){if(C=d(W,{currentCaretPosition:S,previousConformedValue:Z,placeholderChar:j}),C===!1)return;var te=(0,b.processCaretTraps)(C),Y=te.maskWithoutCaretTraps,ne=te.indexes;C=Y,ee=ne,M=(0,b.convertMaskToPlaceholder)(C,j)}else C=d;var re={previousConformedValue:Z,guide:z,placeholderChar:j,pipe:D,placeholder:M,currentCaretPosition:S,keepCharPositions:N},H=(0,s.default)(W,C,re),B=H.conformedValue,J=(typeof D>"u"?"undefined":y(D))===a.strFunction,V={};J&&(V=D(B,_({rawValue:W},re)),V===!1?V={value:Z,rejected:!0}:(0,b.isString)(V)&&(V={value:V}));var w=J?V.value:B,L=(0,x.default)({previousConformedValue:Z,previousPlaceholder:Q,conformedValue:w,placeholder:M,rawValue:W,currentCaretPosition:S,placeholderChar:j,indexesOfPipedChars:V.indexesOfPipedChars,caretTrapIndexes:ee}),$=w===M&&L===0,E=R?M:O,oe=$?E:w;t.previousConformedValue=oe,t.previousPlaceholder=M,f.value!==oe&&(f.value=oe,g(f,L))}}}}}function g(e,t){document.activeElement===e&&(I?l(function(){return e.setSelectionRange(t,t,X)},0):e.setSelectionRange(t,t,X))}function m(e){if((0,b.isString)(e))return e;if((0,b.isNumber)(e))return String(e);if(e==null)return O;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(e))}Object.defineProperty(r,"__esModule",{value:!0});var _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(e[p]=n[p])}return e},y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.default=c;var v=o(4),x=i(v),k=o(3),s=i(k),b=o(2),a=o(1),O="",X="none",P="object",I=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),l=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout},function(h,r){function o(c){return function(){return c}}var i=function(){};i.thatReturns=o,i.thatReturnsFalse=o(!1),i.thatReturnsTrue=o(!0),i.thatReturnsNull=o(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(c){return c},h.exports=i},function(h,r,o){function i(c,g,m,_,y,v,x,k){if(!c){var s;if(g===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[m,_,y,v,x,k],a=0;s=new Error(g.replace(/%s/g,function(){return b[a++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}h.exports=i},function(h,r,o){var i=o(6),c=o(7),g=o(10);h.exports=function(){function m(v,x,k,s,b,a){a!==g&&c(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function _(){return m}m.isRequired=m;var y={array:m,bool:m,func:m,number:m,object:m,string:m,symbol:m,any:m,arrayOf:_,element:m,instanceOf:_,node:m,objectOf:_,oneOf:_,oneOfType:_,shape:_,exact:_};return y.checkPropTypes=i,y.PropTypes=y,y}},function(h,r,o){h.exports=o(8)()},function(h,r){var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";h.exports=o},function(h,r){h.exports=K}])})})(le);var Oe=le.exports;const Me=de(Oe),Pe="_form_1ajdo_1",we="_formGroup_1ajdo_11",Ee="_textField_1ajdo_25",Ne="_checkbox_1ajdo_40",Se="_btn_1ajdo_57",F={form:Pe,formGroup:we,textField:Ee,checkbox:Ne,btn:Se},Ve=({onSubmit:T,initialState:U,onCancel:K})=>{const{state:h,handleChange:r,handleSubmit:o}=ve({initialState:U,onSubmit:T}),{title:i,director:c,favorite:g,genre:m,releaseDate:_}=h,y=[/\d/,/\d/,/\d/,/\d/],v=x=>{x.preventDefault(),K&&K()};return u.jsxs("form",{onSubmit:o,className:F.form,encType:"multipart/form-data",children:[u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie title"}),u.jsx("input",{value:i||"",name:"title",onChange:r,className:F.textField,placeholder:"Movie title",required:!0})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie director"}),u.jsx("input",{value:c||"",name:"director",onChange:r,className:F.textField,placeholder:"Movie director",required:!0})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Favorite"}),u.jsx("input",{checked:!!g,name:"favorite",onChange:r,className:F.checkbox,type:"checkbox"})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie genre"}),u.jsxs("select",{name:"genre",value:m||"fantastic",onChange:r,className:F.textField,children:[u.jsx("option",{value:"fantastic",children:"Fantastic"}),u.jsx("option",{value:"love story",children:"Love story"})]})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie release date"}),u.jsx(Me,{mask:y,value:_||"",name:"releaseDate",onChange:r,className:F.textField,placeholder:"YYYY",required:!0})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Poster"}),u.jsx("input",{name:"poster",type:"file",onChange:r})]}),u.jsx("button",{className:F.btn,onClick:v,children:"Cancel"}),u.jsx("button",{className:F.btn,type:"submit",children:"Edit Movie"})]})},Be=({movie:T,className:U})=>{const[K,h]=ie.useState(!1),r=fe(),o=()=>h(!0),i=()=>h(!1),c=g=>{r(pe({id:T._id,data:g})),i()};return u.jsxs("div",{children:[u.jsx("button",{className:U,onClick:o,children:"Edit"}),K&&u.jsx(Te,{close:i,title:"Edit Movie",content:u.jsx(Ve,{initialState:{title:T.title,director:T.director,favorite:T.favorite,genre:T.genre,releaseDate:T.releaseDate,poster:null},onSubmit:c,onCancel:i})})]})},De=({movies:T})=>T.items,Ie=he([De],T=>T.filter(({favorite:U})=>U));export{Be as E,Me as M,xe as T,De as a,Ae as b,Ie as g,F as s};
