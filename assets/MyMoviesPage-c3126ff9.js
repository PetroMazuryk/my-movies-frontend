import{r as ie,j as i,c as ce,g as fe,u as de,a as pe,f as he,b as ve,d as me}from"./index-fbf070e3.js";import{g as ge,M as se}from"./movies-selectors-f94744f7.js";import{u as ye}from"./useForm-e4d73f7a.js";const be="_list_k381j_1",xe="_listItem_k381j_10",ke="_posterWrapper_k381j_27",_e="_listItemPoster_k381j_39",je="_listItemInfo_k381j_51",Ce="_button_k381j_65",Te="_btnEdit_k381j_88",re={list:be,listItem:xe,posterWrapper:ke,listItemPoster:_e,listItemInfo:je,button:Ce,btnEdit:Te},Oe="http://localhost:4444",Pe=({items:X,onDeleteMovie:W})=>{const R=ie.useRef(null),g=X.map(({_id:r,title:s,director:u,genre:f,poster:m,releaseDate:h})=>i.jsxs("li",{className:re.listItem,children:[m&&i.jsx("div",{className:re.posterWrapper,children:i.jsx("img",{ref:R,className:re.listItemPoster,src:`${Oe}/${m}`,alt:`Poster for ${s}`})}),i.jsxs("div",{className:re.listItemInfo,children:[i.jsxs("h2",{children:["Назва: ",s]}),i.jsxs("span",{children:["Director: ",u]}),i.jsxs("span",{children:["Genre: ",f]}),i.jsxs("span",{children:["Release: ",h]})]}),i.jsx("button",{className:re.button,onClick:()=>W(r),children:"Delete"}),i.jsx("button",{className:re.btnEdit,children:"Edit"})]},r));return i.jsx("ol",{className:re.list,children:g})};var ue={exports:{}};(function(X,W){(function(R,g){X.exports=g(ie)})(ce,function(R){return function(g){function r(u){if(s[u])return s[u].exports;var f=s[u]={exports:{},id:u,loaded:!1};return g[u].call(f.exports,f,f.exports,r),f.loaded=!0,f.exports}var s={};return r.m=g,r.c=s,r.p="",r(0)}([function(g,r,s){function u(l){return l&&l.__esModule?l:{default:l}}function f(l,e){var t={};for(var n in l)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);return t}function m(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function h(l,e){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?l:e}function x(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(l,e):l.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0}),r.conformToMask=void 0;var v=Object.assign||function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(l[n]=t[n])}return l},y=function(){function l(e,t){for(var n=0;n<t.length;n++){var p=t[n];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}}(),j=s(3);Object.defineProperty(r,"conformToMask",{enumerable:!0,get:function(){return u(j).default}});var k=s(11),a=u(k),b=s(9),o=u(b),T=s(5),U=u(T),P=s(2),B=function(l){function e(){var t;m(this,e);for(var n=arguments.length,p=Array(n),d=0;d<n;d++)p[d]=arguments[d];var c=h(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(p)));return c.setRef=c.setRef.bind(c),c.onBlur=c.onBlur.bind(c),c.onChange=c.onChange.bind(c),c}return x(e,l),y(e,[{key:"setRef",value:function(t){this.inputElement=t}},{key:"initTextMask",value:function(){var t=this.props,n=this.props.value;this.textMaskInputElement=(0,U.default)(v({inputElement:this.inputElement},t)),this.textMaskInputElement.update(n)}},{key:"componentDidMount",value:function(){this.initTextMask()}},{key:"componentDidUpdate",value:function(t){var n=this.props,p=n.value,d=n.pipe,c=n.mask,J=n.guide,I=n.placeholderChar,q=n.showMask,C={guide:J,placeholderChar:I,showMask:q},G=typeof d=="function"&&typeof t.pipe=="function"?d.toString()!==t.pipe.toString():(0,P.isNil)(d)&&!(0,P.isNil)(t.pipe)||!(0,P.isNil)(d)&&(0,P.isNil)(t.pipe),N=c.toString()!==t.mask.toString(),A=Object.keys(C).some(function(O){return C[O]!==t[O]})||N||G,V=p!==this.inputElement.value;(V||A)&&this.initTextMask()}},{key:"render",value:function(){var n=this.props,p=n.render,d=f(n,["render"]);return delete d.mask,delete d.guide,delete d.pipe,delete d.placeholderChar,delete d.keepCharPositions,delete d.value,delete d.onBlur,delete d.onChange,delete d.showMask,p(this.setRef,v({onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value},d))}},{key:"onChange",value:function(t){this.textMaskInputElement.update(),typeof this.props.onChange=="function"&&this.props.onChange(t)}},{key:"onBlur",value:function(t){typeof this.props.onBlur=="function"&&this.props.onBlur(t)}}]),e}(a.default.PureComponent);r.default=B,B.propTypes={mask:o.default.oneOfType([o.default.array,o.default.func,o.default.bool,o.default.shape({mask:o.default.oneOfType([o.default.array,o.default.func]),pipe:o.default.func})]).isRequired,guide:o.default.bool,value:o.default.oneOfType([o.default.string,o.default.number]),pipe:o.default.func,placeholderChar:o.default.string,keepCharPositions:o.default.bool,showMask:o.default.bool},B.defaultProps={render:function(l,e){return a.default.createElement("input",v({ref:l},e))}}},function(g,r){Object.defineProperty(r,"__esModule",{value:!0}),r.placeholderChar="_",r.strFunction="function"},function(g,r,s){function u(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.placeholderChar;if(!f(a))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(a.indexOf(b)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(b)+`

`)+("The mask that was received is: "+JSON.stringify(a)));return a.map(function(o){return o instanceof RegExp?b:o}).join("")}function f(a){return Array.isArray&&Array.isArray(a)||a instanceof Array}function m(a){return typeof a=="string"||a instanceof String}function h(a){return typeof a=="number"&&a.length===void 0&&!isNaN(a)}function x(a){return typeof a>"u"||a===null}function v(a){for(var b=[],o=void 0;o=a.indexOf(k),o!==-1;)b.push(o),a.splice(o,1);return{maskWithoutCaretTraps:a,indexes:b}}Object.defineProperty(r,"__esModule",{value:!0}),r.convertMaskToPlaceholder=u,r.isArray=f,r.isString=m,r.isNumber=h,r.isNil=x,r.processCaretTraps=v;var y=s(1),j=[],k="[]"},function(g,r,s){function u(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,m.isArray)(j)){if((typeof j>"u"?"undefined":f(j))!==h.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");j=j(y,k),j=(0,m.processCaretTraps)(j).maskWithoutCaretTraps}var a=k.guide,b=a===void 0||a,o=k.previousConformedValue,T=o===void 0?v:o,U=k.placeholderChar,P=U===void 0?h.placeholderChar:U,B=k.placeholder,l=B===void 0?(0,m.convertMaskToPlaceholder)(j,P):B,e=k.currentCaretPosition,t=k.keepCharPositions,n=b===!1&&T!==void 0,p=y.length,d=T.length,c=l.length,J=j.length,I=p-d,q=I>0,C=e+(q?-I:0),G=C+Math.abs(I);if(t===!0&&!q){for(var N=v,A=C;A<G;A++)l[A]===P&&(N+=P);y=y.slice(0,C)+N+y.slice(C,p)}for(var V=y.split(v).map(function(L,$){return{char:L,isNew:$>=C&&$<G}}),O=p-1;O>=0;O--){var _=V[O].char;if(_!==P){var K=O>=C&&d===J;_===l[K?O-I:O]&&V.splice(O,1)}}var E=v,Q=!1;e:for(var z=0;z<c;z++){var ee=l[z];if(ee===P){if(V.length>0)for(;V.length>0;){var te=V.shift(),Z=te.char,oe=te.isNew;if(Z===P&&n!==!0){E+=P;continue e}if(j[z].test(Z)){if(t===!0&&oe!==!1&&T!==v&&b!==!1&&q){for(var ne=V.length,Y=null,D=0;D<ne;D++){var H=V[D];if(H.char!==P&&H.isNew===!1)break;if(H.char===P){Y=D;break}}Y!==null?(E+=Z,V.splice(Y,1)):z--}else E+=Z;continue e}Q=!0}n===!1&&(E+=l.substr(z,c));break}E+=ee}if(n&&q===!1){for(var S=null,M=0;M<E.length;M++)l[M]===P&&(S=M);E=S!==null?E.substr(0,S+1):v}return{conformedValue:E,meta:{someCharsRejected:Q}}}Object.defineProperty(r,"__esModule",{value:!0});var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y};r.default=u;var m=s(2),h=s(1),x=[],v=""},function(g,r){function s(m){var h=m.previousConformedValue,x=h===void 0?f:h,v=m.previousPlaceholder,y=v===void 0?f:v,j=m.currentCaretPosition,k=j===void 0?0:j,a=m.conformedValue,b=m.rawValue,o=m.placeholderChar,T=m.placeholder,U=m.indexesOfPipedChars,P=U===void 0?u:U,B=m.caretTrapIndexes,l=B===void 0?u:B;if(k===0||!b.length)return 0;var e=b.length,t=x.length,n=T.length,p=a.length,d=e-t,c=d>0,J=t===0,I=d>1&&!c&&!J;if(I)return k;var q=c&&(x===a||a===T),C=0,G=void 0,N=void 0;if(q)C=k-d;else{var A=a.toLowerCase(),V=b.toLowerCase(),O=V.substr(0,k).split(f),_=O.filter(function(w){return A.indexOf(w)!==-1});N=_[_.length-1];var K=y.substr(0,_.length).split(f).filter(function(w){return w!==o}).length,E=T.substr(0,_.length).split(f).filter(function(w){return w!==o}).length,Q=E!==K,z=y[_.length-1]!==void 0&&T[_.length-2]!==void 0&&y[_.length-1]!==o&&y[_.length-1]!==T[_.length-1]&&y[_.length-1]===T[_.length-2];!c&&(Q||z)&&K>0&&T.indexOf(N)>-1&&b[k]!==void 0&&(G=!0,N=b[k]);for(var ee=P.map(function(w){return A[w]}),te=ee.filter(function(w){return w===N}).length,Z=_.filter(function(w){return w===N}).length,oe=T.substr(0,T.indexOf(o)).split(f).filter(function(w,ae){return w===N&&b[ae]!==w}).length,ne=oe+Z+te+(G?1:0),Y=0,D=0;D<p;D++){var H=A[D];if(C=D+1,H===N&&Y++,Y>=ne)break}}if(c){for(var S=C,M=C;M<=n;M++)if(T[M]===o&&(S=M),T[M]===o||l.indexOf(M)!==-1||M===n)return S}else if(G){for(var L=C-1;L>=0;L--)if(a[L]===N||l.indexOf(L)!==-1||L===0)return L}else for(var $=C;$>=0;$--)if(T[$-1]===o||l.indexOf($)!==-1||$===0)return $}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=[],f=""},function(g,r,s){function u(e){return e&&e.__esModule?e:{default:e}}function f(e){var t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update:function(n){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,d=p.inputElement,c=p.mask,J=p.guide,I=p.pipe,q=p.placeholderChar,C=q===void 0?o.placeholderChar:q,G=p.keepCharPositions,N=G!==void 0&&G,A=p.showMask,V=A!==void 0&&A;if(typeof n>"u"&&(n=d.value),n!==t.previousConformedValue){(typeof c>"u"?"undefined":v(c))===P&&c.pipe!==void 0&&c.mask!==void 0&&(I=c.pipe,c=c.mask);var O=void 0,_=void 0;if(c instanceof Array&&(O=(0,b.convertMaskToPlaceholder)(c,C)),c!==!1){var K=h(n),E=d.selectionEnd,Q=t.previousConformedValue,z=t.previousPlaceholder,ee=void 0;if((typeof c>"u"?"undefined":v(c))===o.strFunction){if(_=c(K,{currentCaretPosition:E,previousConformedValue:Q,placeholderChar:C}),_===!1)return;var te=(0,b.processCaretTraps)(_),Z=te.maskWithoutCaretTraps,oe=te.indexes;_=Z,ee=oe,O=(0,b.convertMaskToPlaceholder)(_,C)}else _=c;var ne={previousConformedValue:Q,guide:J,placeholderChar:C,pipe:I,placeholder:O,currentCaretPosition:E,keepCharPositions:N},Y=(0,a.default)(K,_,ne),D=Y.conformedValue,H=(typeof I>"u"?"undefined":v(I))===o.strFunction,S={};H&&(S=I(D,x({rawValue:K},ne)),S===!1?S={value:Q,rejected:!0}:(0,b.isString)(S)&&(S={value:S}));var M=H?S.value:D,L=(0,j.default)({previousConformedValue:Q,previousPlaceholder:z,conformedValue:M,placeholder:O,rawValue:K,currentCaretPosition:E,placeholderChar:C,indexesOfPipedChars:S.indexesOfPipedChars,caretTrapIndexes:ee}),$=M===O&&L===0,w=V?O:T,ae=$?w:M;t.previousConformedValue=ae,t.previousPlaceholder=O,d.value!==ae&&(d.value=ae,m(d,L))}}}}}function m(e,t){document.activeElement===e&&(B?l(function(){return e.setSelectionRange(t,t,U)},0):e.setSelectionRange(t,t,U))}function h(e){if((0,b.isString)(e))return e;if((0,b.isNumber)(e))return String(e);if(e==null)return T;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(e))}Object.defineProperty(r,"__esModule",{value:!0});var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(e[p]=n[p])}return e},v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.default=f;var y=s(4),j=u(y),k=s(3),a=u(k),b=s(2),o=s(1),T="",U="none",P="object",B=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),l=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout},function(g,r){function s(f){return function(){return f}}var u=function(){};u.thatReturns=s,u.thatReturnsFalse=s(!1),u.thatReturnsTrue=s(!0),u.thatReturnsNull=s(null),u.thatReturnsThis=function(){return this},u.thatReturnsArgument=function(f){return f},g.exports=u},function(g,r,s){function u(f,m,h,x,v,y,j,k){if(!f){var a;if(m===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[h,x,v,y,j,k],o=0;a=new Error(m.replace(/%s/g,function(){return b[o++]})),a.name="Invariant Violation"}throw a.framesToPop=1,a}}g.exports=u},function(g,r,s){var u=s(6),f=s(7),m=s(10);g.exports=function(){function h(y,j,k,a,b,o){o!==m&&f(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function x(){return h}h.isRequired=h;var v={array:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:x,element:h,instanceOf:x,node:h,objectOf:x,oneOf:x,oneOfType:x,shape:x,exact:x};return v.checkPropTypes=u,v.PropTypes=v,v}},function(g,r,s){g.exports=s(8)()},function(g,r){var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";g.exports=s},function(g,r){g.exports=R}])})})(ue);var Me=ue.exports;const we=fe(Me),Ne={title:"",director:"",favorite:!1,genre:"fantastic",releaseDate:""},Ee="_form_evz1p_1",Se="_formGroup_evz1p_11",Ie="_textField_evz1p_25",Ve="_checkbox_evz1p_40",Re="_btn_evz1p_57",F={form:Ee,formGroup:Se,textField:Ie,checkbox:Ve,btn:Re},Ae=({onSubmit:X})=>{const{state:W,handleChange:R,reset:g}=ye({initialState:Ne,onSubmit:X}),r=x=>{x.preventDefault();const v=new FormData(x.currentTarget);v.set("favorite",W.favorite),X(v),g()},{title:s,director:u,favorite:f,releaseDate:m}=W,h=[/\d/,/\d/,/\d/,/\d/];return i.jsxs("form",{onSubmit:r,className:F.form,encType:"multipart/form-data",children:[i.jsxs("div",{className:F.formGroup,children:[i.jsx("label",{children:"Movie title"}),i.jsx("input",{value:s,name:"title",onChange:R,className:F.textField,placeholder:"Movie title",required:!0})]}),i.jsxs("div",{className:F.formGroup,children:[i.jsx("label",{children:"Movie director"}),i.jsx("input",{value:u,name:"director",onChange:R,className:F.textField,placeholder:"Movie director",required:!0})]}),i.jsxs("div",{className:F.formGroup,children:[i.jsx("label",{children:"Favorite"}),i.jsx("input",{checked:f,name:"favorite",onChange:R,className:F.checkbox,type:"checkbox"})]}),i.jsxs("div",{className:F.formGroup,children:[i.jsx("label",{children:"Movie genre"}),i.jsxs("select",{name:"genre",onChange:R,children:[i.jsx("option",{value:"fantastic",children:"Fantastic"}),i.jsx("option",{value:"love story",children:"Love story"})]})]}),i.jsxs("div",{className:F.formGroup,children:[i.jsx("label",{children:"Movie release date"}),i.jsx(we,{mask:h,value:m,name:"releaseDate",onChange:R,className:F.textField,placeholder:"YYYY",required:!0})]}),i.jsxs("div",{className:F.formGroup,children:[i.jsx("label",{children:"Poster"}),i.jsx("input",{name:"poster",type:"file"})]}),i.jsx("button",{className:F.btn,type:"submit",children:"Add movie"})]})},De="_wrapper_2saq2_1",Fe="_title_2saq2_5",Be="_blocks_2saq2_12",le={wrapper:De,title:Fe,blocks:Be},qe=()=>{const X=de(ge),W=pe();ie.useEffect(()=>{W(he())},[W]);const R=r=>{W(ve(r))},g=r=>{W(me(r))};return i.jsx("div",{className:le.wrapper,children:i.jsxs("div",{className:le.blocks,children:[i.jsx(se,{title:"Add movie",children:i.jsx(Ae,{onSubmit:R})}),i.jsx(se,{title:"Movie list",children:i.jsx(Pe,{items:X,onDeleteMovie:g})})]})})},We=()=>i.jsxs("div",{className:"container",children:[i.jsx("h1",{className:"page-title",children:"My movies page"}),i.jsx(qe,{})]});export{We as default};
