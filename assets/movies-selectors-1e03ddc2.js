import{j as u,r as ne,e as pe,g as he,h as ve,u as me,i as ye,k as ue,l as ge}from"./index-fcce2c3a.js";import{T as be,u as xe}from"./useForm-eadeddbc.js";const ke="_wrapper_vi786_1",Ce="_title_vi786_5",le={wrapper:ke,title:Ce},Ke=({title:b,children:p})=>u.jsxs("div",{className:le.wrapper,children:[u.jsx("h4",{className:le.title,children:b}),p]}),_e="_overlay_19ka7_1",Te="_modal_19ka7_14",je="_close_19ka7_26",ie={overlay:_e,modal:Te,close:je},we=document.getElementById("modal-root"),Oe=({close:b,title:p,content:j,actions:c})=>{const r=({target:n,currentTarget:i,code:d})=>{(n===i||d==="Escape")&&b()};return ne.useEffect(()=>{const n=i=>r(i);return document.body.addEventListener("keydown",n),()=>document.body.removeEventListener("keydown",n)},[]),pe.createPortal(u.jsx("div",{onClick:r,className:ie.overlay,children:u.jsxs("div",{className:ie.modal,children:[u.jsx("span",{onClick:b,className:ie.close,children:"X"}),p&&u.jsx(be,{children:"Edit Movie"}),j&&u.jsx("div",{children:j}),c&&u.jsx("div",{className:ie.actions,children:c})]})}),we)};var ce={exports:{}};(function(b,p){(function(j,c){b.exports=c(ne)})(he,function(j){return function(c){function r(i){if(n[i])return n[i].exports;var d=n[i]={exports:{},id:i,loaded:!1};return c[i].call(d.exports,d,d.exports,r),d.loaded=!0,d.exports}var n={};return r.m=c,r.c=n,r.p="",r(0)}([function(c,r,n){function i(l){return l&&l.__esModule?l:{default:l}}function d(l,e){var t={};for(var o in l)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);return t}function y(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function h(l,e){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?l:e}function w(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(l,e):l.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0}),r.conformToMask=void 0;var x=Object.assign||function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(l[o]=t[o])}return l},g=function(){function l(e,t){for(var o=0;o<t.length;o++){var m=t[o];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(e,m.key,m)}}return function(e,t,o){return t&&l(e.prototype,t),o&&l(e,o),e}}(),C=n(3);Object.defineProperty(r,"conformToMask",{enumerable:!0,get:function(){return i(C).default}});var _=n(11),s=i(_),k=n(9),a=i(k),M=n(5),X=i(M),P=n(2),q=function(l){function e(){var t;y(this,e);for(var o=arguments.length,m=Array(o),v=0;v<o;v++)m[v]=arguments[v];var f=h(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(m)));return f.setRef=f.setRef.bind(f),f.onBlur=f.onBlur.bind(f),f.onChange=f.onChange.bind(f),f}return w(e,l),g(e,[{key:"setRef",value:function(t){this.inputElement=t}},{key:"initTextMask",value:function(){var t=this.props,o=this.props.value;this.textMaskInputElement=(0,X.default)(x({inputElement:this.inputElement},t)),this.textMaskInputElement.update(o)}},{key:"componentDidMount",value:function(){this.initTextMask()}},{key:"componentDidUpdate",value:function(t){var o=this.props,m=o.value,v=o.pipe,f=o.mask,z=o.guide,A=o.placeholderChar,U=o.showMask,O={guide:z,placeholderChar:A,showMask:U},L=typeof v=="function"&&typeof t.pipe=="function"?v.toString()!==t.pipe.toString():(0,P.isNil)(v)&&!(0,P.isNil)(t.pipe)||!(0,P.isNil)(v)&&(0,P.isNil)(t.pipe),V=f.toString()!==t.mask.toString(),R=Object.keys(O).some(function(E){return O[E]!==t[E]})||V||L,B=m!==this.inputElement.value;(B||R)&&this.initTextMask()}},{key:"render",value:function(){var o=this.props,m=o.render,v=d(o,["render"]);return delete v.mask,delete v.guide,delete v.pipe,delete v.placeholderChar,delete v.keepCharPositions,delete v.value,delete v.onBlur,delete v.onChange,delete v.showMask,m(this.setRef,x({onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value},v))}},{key:"onChange",value:function(t){this.textMaskInputElement.update(),typeof this.props.onChange=="function"&&this.props.onChange(t)}},{key:"onBlur",value:function(t){typeof this.props.onBlur=="function"&&this.props.onBlur(t)}}]),e}(s.default.PureComponent);r.default=q,q.propTypes={mask:a.default.oneOfType([a.default.array,a.default.func,a.default.bool,a.default.shape({mask:a.default.oneOfType([a.default.array,a.default.func]),pipe:a.default.func})]).isRequired,guide:a.default.bool,value:a.default.oneOfType([a.default.string,a.default.number]),pipe:a.default.func,placeholderChar:a.default.string,keepCharPositions:a.default.bool,showMask:a.default.bool},q.defaultProps={render:function(l,e){return s.default.createElement("input",x({ref:l},e))}}},function(c,r){Object.defineProperty(r,"__esModule",{value:!0}),r.placeholderChar="_",r.strFunction="function"},function(c,r,n){function i(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.placeholderChar;if(!d(s))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(s.indexOf(k)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(k)+`

`)+("The mask that was received is: "+JSON.stringify(s)));return s.map(function(a){return a instanceof RegExp?k:a}).join("")}function d(s){return Array.isArray&&Array.isArray(s)||s instanceof Array}function y(s){return typeof s=="string"||s instanceof String}function h(s){return typeof s=="number"&&s.length===void 0&&!isNaN(s)}function w(s){return typeof s>"u"||s===null}function x(s){for(var k=[],a=void 0;a=s.indexOf(_),a!==-1;)k.push(a),s.splice(a,1);return{maskWithoutCaretTraps:s,indexes:k}}Object.defineProperty(r,"__esModule",{value:!0}),r.convertMaskToPlaceholder=i,r.isArray=d,r.isString=y,r.isNumber=h,r.isNil=w,r.processCaretTraps=x;var g=n(1),C=[],_="[]"},function(c,r,n){function i(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,y.isArray)(C)){if((typeof C>"u"?"undefined":d(C))!==h.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");C=C(g,_),C=(0,y.processCaretTraps)(C).maskWithoutCaretTraps}var s=_.guide,k=s===void 0||s,a=_.previousConformedValue,M=a===void 0?x:a,X=_.placeholderChar,P=X===void 0?h.placeholderChar:X,q=_.placeholder,l=q===void 0?(0,y.convertMaskToPlaceholder)(C,P):q,e=_.currentCaretPosition,t=_.keepCharPositions,o=k===!1&&M!==void 0,m=g.length,v=M.length,f=l.length,z=C.length,A=m-v,U=A>0,O=e+(U?-A:0),L=O+Math.abs(A);if(t===!0&&!U){for(var V=x,R=O;R<L;R++)l[R]===P&&(V+=P);g=g.slice(0,O)+V+g.slice(O,m)}for(var B=g.split(x).map(function(G,K){return{char:G,isNew:K>=O&&K<L}}),E=m-1;E>=0;E--){var T=B[E].char;if(T!==P){var Q=E>=O&&v===z;T===l[Q?E-A:E]&&B.splice(E,1)}}var I=x,W=!1;e:for(var Y=0;Y<f;Y++){var ee=l[Y];if(ee===P){if(B.length>0)for(;B.length>0;){var te=B.shift(),Z=te.char,oe=te.isNew;if(Z===P&&o!==!0){I+=P;continue e}if(C[Y].test(Z)){if(t===!0&&oe!==!1&&M!==x&&k!==!1&&U){for(var re=B.length,H=null,D=0;D<re;D++){var J=B[D];if(J.char!==P&&J.isNew===!1)break;if(J.char===P){H=D;break}}H!==null?(I+=Z,B.splice(H,1)):Y--}else I+=Z;continue e}W=!0}o===!1&&(I+=l.substr(Y,f));break}I+=ee}if(o&&U===!1){for(var $=null,N=0;N<I.length;N++)l[N]===P&&($=N);I=$!==null?I.substr(0,$+1):x}return{conformedValue:I,meta:{someCharsRejected:W}}}Object.defineProperty(r,"__esModule",{value:!0});var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g};r.default=i;var y=n(2),h=n(1),w=[],x=""},function(c,r){function n(y){var h=y.previousConformedValue,w=h===void 0?d:h,x=y.previousPlaceholder,g=x===void 0?d:x,C=y.currentCaretPosition,_=C===void 0?0:C,s=y.conformedValue,k=y.rawValue,a=y.placeholderChar,M=y.placeholder,X=y.indexesOfPipedChars,P=X===void 0?i:X,q=y.caretTrapIndexes,l=q===void 0?i:q;if(_===0||!k.length)return 0;var e=k.length,t=w.length,o=M.length,m=s.length,v=e-t,f=v>0,z=t===0,A=v>1&&!f&&!z;if(A)return _;var U=f&&(w===s||s===M),O=0,L=void 0,V=void 0;if(U)O=_-v;else{var R=s.toLowerCase(),B=k.toLowerCase(),E=B.substr(0,_).split(d),T=E.filter(function(S){return R.indexOf(S)!==-1});V=T[T.length-1];var Q=g.substr(0,T.length).split(d).filter(function(S){return S!==a}).length,I=M.substr(0,T.length).split(d).filter(function(S){return S!==a}).length,W=I!==Q,Y=g[T.length-1]!==void 0&&M[T.length-2]!==void 0&&g[T.length-1]!==a&&g[T.length-1]!==M[T.length-1]&&g[T.length-1]===M[T.length-2];!f&&(W||Y)&&Q>0&&M.indexOf(V)>-1&&k[_]!==void 0&&(L=!0,V=k[_]);for(var ee=P.map(function(S){return R[S]}),te=ee.filter(function(S){return S===V}).length,Z=T.filter(function(S){return S===V}).length,oe=M.substr(0,M.indexOf(a)).split(d).filter(function(S,ae){return S===V&&k[ae]!==S}).length,re=oe+Z+te+(L?1:0),H=0,D=0;D<m;D++){var J=R[D];if(O=D+1,J===V&&H++,H>=re)break}}if(f){for(var $=O,N=O;N<=o;N++)if(M[N]===a&&($=N),M[N]===a||l.indexOf(N)!==-1||N===o)return $}else if(L){for(var G=O-1;G>=0;G--)if(s[G]===V||l.indexOf(G)!==-1||G===0)return G}else for(var K=O;K>=0;K--)if(M[K-1]===a||l.indexOf(K)!==-1||K===0)return K}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=[],d=""},function(c,r,n){function i(e){return e&&e.__esModule?e:{default:e}}function d(e){var t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update:function(o){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,v=m.inputElement,f=m.mask,z=m.guide,A=m.pipe,U=m.placeholderChar,O=U===void 0?a.placeholderChar:U,L=m.keepCharPositions,V=L!==void 0&&L,R=m.showMask,B=R!==void 0&&R;if(typeof o>"u"&&(o=v.value),o!==t.previousConformedValue){(typeof f>"u"?"undefined":x(f))===P&&f.pipe!==void 0&&f.mask!==void 0&&(A=f.pipe,f=f.mask);var E=void 0,T=void 0;if(f instanceof Array&&(E=(0,k.convertMaskToPlaceholder)(f,O)),f!==!1){var Q=h(o),I=v.selectionEnd,W=t.previousConformedValue,Y=t.previousPlaceholder,ee=void 0;if((typeof f>"u"?"undefined":x(f))===a.strFunction){if(T=f(Q,{currentCaretPosition:I,previousConformedValue:W,placeholderChar:O}),T===!1)return;var te=(0,k.processCaretTraps)(T),Z=te.maskWithoutCaretTraps,oe=te.indexes;T=Z,ee=oe,E=(0,k.convertMaskToPlaceholder)(T,O)}else T=f;var re={previousConformedValue:W,guide:z,placeholderChar:O,pipe:A,placeholder:E,currentCaretPosition:I,keepCharPositions:V},H=(0,s.default)(Q,T,re),D=H.conformedValue,J=(typeof A>"u"?"undefined":x(A))===a.strFunction,$={};J&&($=A(D,w({rawValue:Q},re)),$===!1?$={value:W,rejected:!0}:(0,k.isString)($)&&($={value:$}));var N=J?$.value:D,G=(0,C.default)({previousConformedValue:W,previousPlaceholder:Y,conformedValue:N,placeholder:E,rawValue:Q,currentCaretPosition:I,placeholderChar:O,indexesOfPipedChars:$.indexesOfPipedChars,caretTrapIndexes:ee}),K=N===E&&G===0,S=B?E:M,ae=K?S:N;t.previousConformedValue=ae,t.previousPlaceholder=E,v.value!==ae&&(v.value=ae,y(v,G))}}}}}function y(e,t){document.activeElement===e&&(q?l(function(){return e.setSelectionRange(t,t,X)},0):e.setSelectionRange(t,t,X))}function h(e){if((0,k.isString)(e))return e;if((0,k.isNumber)(e))return String(e);if(e==null)return M;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(e))}Object.defineProperty(r,"__esModule",{value:!0});var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var m in o)Object.prototype.hasOwnProperty.call(o,m)&&(e[m]=o[m])}return e},x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.default=d;var g=n(4),C=i(g),_=n(3),s=i(_),k=n(2),a=n(1),M="",X="none",P="object",q=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),l=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout},function(c,r){function n(d){return function(){return d}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(d){return d},c.exports=i},function(c,r,n){function i(d,y,h,w,x,g,C,_){if(!d){var s;if(y===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[h,w,x,g,C,_],a=0;s=new Error(y.replace(/%s/g,function(){return k[a++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}c.exports=i},function(c,r,n){var i=n(6),d=n(7),y=n(10);c.exports=function(){function h(g,C,_,s,k,a){a!==y&&d(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function w(){return h}h.isRequired=h;var x={array:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:w,element:h,instanceOf:w,node:h,objectOf:w,oneOf:w,oneOfType:w,shape:w,exact:w};return x.checkPropTypes=i,x.PropTypes=x,x}},function(c,r,n){c.exports=n(8)()},function(c,r){var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";c.exports=n},function(c,r){c.exports=j}])})})(ce);var Me=ce.exports;const Ee=ve(Me),Pe="_form_1ajdo_1",Ne="_formGroup_1ajdo_11",Se="_textField_1ajdo_25",Ve="_checkbox_1ajdo_40",Ie="_btn_1ajdo_57",F={form:Pe,formGroup:Ne,textField:Se,checkbox:Ve,btn:Ie},$e=({onSubmit:b,initialState:p,onCancel:j})=>{const{state:c,handleChange:r,handleSubmit:n}=xe({initialState:p,onSubmit:b}),{title:i,director:d,favorite:y,genre:h,releaseDate:w}=c,x=[/\d/,/\d/,/\d/,/\d/],g=C=>{C.preventDefault(),j&&j()};return u.jsxs("form",{onSubmit:n,className:F.form,encType:"multipart/form-data",children:[u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie title"}),u.jsx("input",{value:i||"",name:"title",onChange:r,className:F.textField,placeholder:"Movie title",required:!0})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie director"}),u.jsx("input",{value:d||"",name:"director",onChange:r,className:F.textField,placeholder:"Movie director",required:!0})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Favorite"}),u.jsx("input",{checked:!!y,name:"favorite",onChange:r,className:F.checkbox,type:"checkbox"})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie genre"}),u.jsxs("select",{name:"genre",value:h||"fantastic",onChange:r,className:F.textField,children:[u.jsx("option",{value:"fantastic",children:"Fantastic"}),u.jsx("option",{value:"love story",children:"Love story"})]})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie release date"}),u.jsx(Ee,{mask:x,value:w||"",name:"releaseDate",onChange:r,className:F.textField,placeholder:"YYYY",required:!0})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Poster"}),u.jsx("input",{name:"poster",type:"file",onChange:r})]}),u.jsx("button",{className:F.btn,onClick:g,children:"Cancel"}),u.jsx("button",{className:F.btn,type:"submit",children:"Edit Movie"})]})},Xe=({movie:b,className:p})=>{const[j,c]=ne.useState(!1),r=me(),n=()=>c(!0),i=()=>c(!1),d=y=>{r(ye({id:b._id,data:y})),i()};return u.jsxs("div",{children:[u.jsx("button",{className:p,onClick:n,children:"Edit"}),j&&u.jsx(Oe,{close:i,title:"Edit Movie",content:u.jsx($e,{initialState:{title:b.title,director:b.director,favorite:b.favorite,genre:b.genre,releaseDate:b.releaseDate,poster:null},onSubmit:d,onCancel:i})})]})},Ye="/my-movies-frontend/assets/sprite-718573d4.svg",Ae="_modal_62xv9_1",Be="_modalContent_62xv9_14",Fe="_close_62xv9_31",se={modal:Ae,modalContent:Be,close:Fe},Qe=({isOpen:b,trailerUrl:p,errorMessage:j,onClose:c})=>b?u.jsx("div",{className:se.modal,children:u.jsxs("div",{className:se.modalContent,children:[u.jsx("button",{className:se.close,onClick:c,children:"×"}),j?u.jsx("p",{className:se.error,children:j}):u.jsx("iframe",{width:"560",height:"315",src:p,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Trailer"})]})}):null,de="https://api.themoviedb.org/3",fe="ba520957137ad46ba4502dabb5237445",Re=async b=>{try{const p=await ue.get(`${de}/search/movie?api_key=${fe}&query=${encodeURIComponent(b)}&page=1`);if(p.data.results.length===0)throw new Error("No movies found for the provided query");return p.data.results[0]}catch(p){throw console.error("Error fetching movie by name:",p),p}},De=async b=>{try{const j=(await ue.get(`${de}/movie/${b}/videos?api_key=${fe}`)).data.results.filter(c=>c.type==="Trailer"&&c.site==="YouTube");if(j.length>0)return j[0];throw new Error("Trailer not found")}catch(p){throw console.error("Error fetching movie trailer:",p),p}},qe=async b=>{try{const p=await Re(b);console.log(`Found movie: ${p.title} (ID: ${p.id})`);const j=await De(p.id);return console.log(`Found trailer: ${j.name} (Key: ${j.key})`),`https://www.youtube.com/embed/${j.key}`}catch(p){throw console.error("Error finding and playing trailer:",p),p}},We=()=>{const[b,p]=ne.useState(!1),[j,c]=ne.useState(""),[r,n]=ne.useState("");return{isModalOpen:b,currentTrailerUrl:j,errorMessage:r,playTrailer:async y=>{try{const h=await qe(y);c(h),n(""),p(!0)}catch(h){n(h.message||"An unexpected error occurred."),c(""),p(!0)}},closeModal:()=>{p(!1),c(""),n("")}}},Ue=({movies:b})=>b.items,Ze=ge([Ue],b=>b.filter(({favorite:p})=>p));export{Xe as E,Ee as M,Qe as T,Ke as a,Ze as b,Ue as g,Ye as i,F as s,We as u};
