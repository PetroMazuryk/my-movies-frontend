import{j as u,r as ne,e as he,g as ve,h as me,u as ye,i as ge,k as ce,l as be}from"./index-93f12fba.js";import{T as xe}from"./TitleText-8d762074.js";import{u as ke}from"./useForm-b8c2547c.js";const Ce="_wrapper_vi786_1",_e="_title_vi786_5",le={wrapper:Ce,title:_e},Ye=({title:y,children:f})=>u.jsxs("div",{className:le.wrapper,children:[u.jsx("h4",{className:le.title,children:y}),f]}),Te="_overlay_19ka7_1",je="_modal_19ka7_14",we="_close_19ka7_26",ie={overlay:Te,modal:je,close:we},ue=document.getElementById("modal-root"),Oe=({close:y,title:f,content:j,actions:c})=>{if(ne.useEffect(()=>{const n=s=>{s.code==="Escape"&&y()};return document.body.addEventListener("keydown",n),()=>document.body.removeEventListener("keydown",n)},[y]),!ue)return null;const r=n=>{n.target===n.currentTarget&&y()};return he.createPortal(u.jsx("div",{onClick:r,className:ie.overlay,children:u.jsxs("div",{className:ie.modal,children:[u.jsx("span",{onClick:y,className:ie.close,children:"×"}),f&&u.jsx(xe,{children:f}),j&&u.jsx("div",{children:j}),c&&u.jsx("div",{className:ie.actions,children:c})]})}),ue)};var de={exports:{}};(function(y,f){(function(j,c){y.exports=c(ne)})(ve,function(j){return function(c){function r(s){if(n[s])return n[s].exports;var p=n[s]={exports:{},id:s,loaded:!1};return c[s].call(p.exports,p,p.exports,r),p.loaded=!0,p.exports}var n={};return r.m=c,r.c=n,r.p="",r(0)}([function(c,r,n){function s(l){return l&&l.__esModule?l:{default:l}}function p(l,e){var t={};for(var o in l)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);return t}function g(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function h(l,e){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?l:e}function w(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(l,e):l.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0}),r.conformToMask=void 0;var x=Object.assign||function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(l[o]=t[o])}return l},b=function(){function l(e,t){for(var o=0;o<t.length;o++){var m=t[o];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(e,m.key,m)}}return function(e,t,o){return t&&l(e.prototype,t),o&&l(e,o),e}}(),C=n(3);Object.defineProperty(r,"conformToMask",{enumerable:!0,get:function(){return s(C).default}});var _=n(11),i=s(_),k=n(9),a=s(k),M=n(5),Y=s(M),P=n(2),q=function(l){function e(){var t;g(this,e);for(var o=arguments.length,m=Array(o),v=0;v<o;v++)m[v]=arguments[v];var d=h(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(m)));return d.setRef=d.setRef.bind(d),d.onBlur=d.onBlur.bind(d),d.onChange=d.onChange.bind(d),d}return w(e,l),b(e,[{key:"setRef",value:function(t){this.inputElement=t}},{key:"initTextMask",value:function(){var t=this.props,o=this.props.value;this.textMaskInputElement=(0,Y.default)(x({inputElement:this.inputElement},t)),this.textMaskInputElement.update(o)}},{key:"componentDidMount",value:function(){this.initTextMask()}},{key:"componentDidUpdate",value:function(t){var o=this.props,m=o.value,v=o.pipe,d=o.mask,z=o.guide,A=o.placeholderChar,U=o.showMask,O={guide:z,placeholderChar:A,showMask:U},L=typeof v=="function"&&typeof t.pipe=="function"?v.toString()!==t.pipe.toString():(0,P.isNil)(v)&&!(0,P.isNil)(t.pipe)||!(0,P.isNil)(v)&&(0,P.isNil)(t.pipe),V=d.toString()!==t.mask.toString(),R=Object.keys(O).some(function(E){return O[E]!==t[E]})||V||L,B=m!==this.inputElement.value;(B||R)&&this.initTextMask()}},{key:"render",value:function(){var o=this.props,m=o.render,v=p(o,["render"]);return delete v.mask,delete v.guide,delete v.pipe,delete v.placeholderChar,delete v.keepCharPositions,delete v.value,delete v.onBlur,delete v.onChange,delete v.showMask,m(this.setRef,x({onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value},v))}},{key:"onChange",value:function(t){this.textMaskInputElement.update(),typeof this.props.onChange=="function"&&this.props.onChange(t)}},{key:"onBlur",value:function(t){typeof this.props.onBlur=="function"&&this.props.onBlur(t)}}]),e}(i.default.PureComponent);r.default=q,q.propTypes={mask:a.default.oneOfType([a.default.array,a.default.func,a.default.bool,a.default.shape({mask:a.default.oneOfType([a.default.array,a.default.func]),pipe:a.default.func})]).isRequired,guide:a.default.bool,value:a.default.oneOfType([a.default.string,a.default.number]),pipe:a.default.func,placeholderChar:a.default.string,keepCharPositions:a.default.bool,showMask:a.default.bool},q.defaultProps={render:function(l,e){return i.default.createElement("input",x({ref:l},e))}}},function(c,r){Object.defineProperty(r,"__esModule",{value:!0}),r.placeholderChar="_",r.strFunction="function"},function(c,r,n){function s(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.placeholderChar;if(!p(i))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(i.indexOf(k)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(k)+`

`)+("The mask that was received is: "+JSON.stringify(i)));return i.map(function(a){return a instanceof RegExp?k:a}).join("")}function p(i){return Array.isArray&&Array.isArray(i)||i instanceof Array}function g(i){return typeof i=="string"||i instanceof String}function h(i){return typeof i=="number"&&i.length===void 0&&!isNaN(i)}function w(i){return typeof i>"u"||i===null}function x(i){for(var k=[],a=void 0;a=i.indexOf(_),a!==-1;)k.push(a),i.splice(a,1);return{maskWithoutCaretTraps:i,indexes:k}}Object.defineProperty(r,"__esModule",{value:!0}),r.convertMaskToPlaceholder=s,r.isArray=p,r.isString=g,r.isNumber=h,r.isNil=w,r.processCaretTraps=x;var b=n(1),C=[],_="[]"},function(c,r,n){function s(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,g.isArray)(C)){if((typeof C>"u"?"undefined":p(C))!==h.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");C=C(b,_),C=(0,g.processCaretTraps)(C).maskWithoutCaretTraps}var i=_.guide,k=i===void 0||i,a=_.previousConformedValue,M=a===void 0?x:a,Y=_.placeholderChar,P=Y===void 0?h.placeholderChar:Y,q=_.placeholder,l=q===void 0?(0,g.convertMaskToPlaceholder)(C,P):q,e=_.currentCaretPosition,t=_.keepCharPositions,o=k===!1&&M!==void 0,m=b.length,v=M.length,d=l.length,z=C.length,A=m-v,U=A>0,O=e+(U?-A:0),L=O+Math.abs(A);if(t===!0&&!U){for(var V=x,R=O;R<L;R++)l[R]===P&&(V+=P);b=b.slice(0,O)+V+b.slice(O,m)}for(var B=b.split(x).map(function(G,K){return{char:G,isNew:K>=O&&K<L}}),E=m-1;E>=0;E--){var T=B[E].char;if(T!==P){var W=E>=O&&v===z;T===l[W?E-A:E]&&B.splice(E,1)}}var I=x,X=!1;e:for(var Q=0;Q<d;Q++){var ee=l[Q];if(ee===P){if(B.length>0)for(;B.length>0;){var te=B.shift(),Z=te.char,oe=te.isNew;if(Z===P&&o!==!0){I+=P;continue e}if(C[Q].test(Z)){if(t===!0&&oe!==!1&&M!==x&&k!==!1&&U){for(var re=B.length,H=null,D=0;D<re;D++){var J=B[D];if(J.char!==P&&J.isNew===!1)break;if(J.char===P){H=D;break}}H!==null?(I+=Z,B.splice(H,1)):Q--}else I+=Z;continue e}X=!0}o===!1&&(I+=l.substr(Q,d));break}I+=ee}if(o&&U===!1){for(var $=null,N=0;N<I.length;N++)l[N]===P&&($=N);I=$!==null?I.substr(0,$+1):x}return{conformedValue:I,meta:{someCharsRejected:X}}}Object.defineProperty(r,"__esModule",{value:!0});var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};r.default=s;var g=n(2),h=n(1),w=[],x=""},function(c,r){function n(g){var h=g.previousConformedValue,w=h===void 0?p:h,x=g.previousPlaceholder,b=x===void 0?p:x,C=g.currentCaretPosition,_=C===void 0?0:C,i=g.conformedValue,k=g.rawValue,a=g.placeholderChar,M=g.placeholder,Y=g.indexesOfPipedChars,P=Y===void 0?s:Y,q=g.caretTrapIndexes,l=q===void 0?s:q;if(_===0||!k.length)return 0;var e=k.length,t=w.length,o=M.length,m=i.length,v=e-t,d=v>0,z=t===0,A=v>1&&!d&&!z;if(A)return _;var U=d&&(w===i||i===M),O=0,L=void 0,V=void 0;if(U)O=_-v;else{var R=i.toLowerCase(),B=k.toLowerCase(),E=B.substr(0,_).split(p),T=E.filter(function(S){return R.indexOf(S)!==-1});V=T[T.length-1];var W=b.substr(0,T.length).split(p).filter(function(S){return S!==a}).length,I=M.substr(0,T.length).split(p).filter(function(S){return S!==a}).length,X=I!==W,Q=b[T.length-1]!==void 0&&M[T.length-2]!==void 0&&b[T.length-1]!==a&&b[T.length-1]!==M[T.length-1]&&b[T.length-1]===M[T.length-2];!d&&(X||Q)&&W>0&&M.indexOf(V)>-1&&k[_]!==void 0&&(L=!0,V=k[_]);for(var ee=P.map(function(S){return R[S]}),te=ee.filter(function(S){return S===V}).length,Z=T.filter(function(S){return S===V}).length,oe=M.substr(0,M.indexOf(a)).split(p).filter(function(S,ae){return S===V&&k[ae]!==S}).length,re=oe+Z+te+(L?1:0),H=0,D=0;D<m;D++){var J=R[D];if(O=D+1,J===V&&H++,H>=re)break}}if(d){for(var $=O,N=O;N<=o;N++)if(M[N]===a&&($=N),M[N]===a||l.indexOf(N)!==-1||N===o)return $}else if(L){for(var G=O-1;G>=0;G--)if(i[G]===V||l.indexOf(G)!==-1||G===0)return G}else for(var K=O;K>=0;K--)if(M[K-1]===a||l.indexOf(K)!==-1||K===0)return K}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var s=[],p=""},function(c,r,n){function s(e){return e&&e.__esModule?e:{default:e}}function p(e){var t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update:function(o){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,v=m.inputElement,d=m.mask,z=m.guide,A=m.pipe,U=m.placeholderChar,O=U===void 0?a.placeholderChar:U,L=m.keepCharPositions,V=L!==void 0&&L,R=m.showMask,B=R!==void 0&&R;if(typeof o>"u"&&(o=v.value),o!==t.previousConformedValue){(typeof d>"u"?"undefined":x(d))===P&&d.pipe!==void 0&&d.mask!==void 0&&(A=d.pipe,d=d.mask);var E=void 0,T=void 0;if(d instanceof Array&&(E=(0,k.convertMaskToPlaceholder)(d,O)),d!==!1){var W=h(o),I=v.selectionEnd,X=t.previousConformedValue,Q=t.previousPlaceholder,ee=void 0;if((typeof d>"u"?"undefined":x(d))===a.strFunction){if(T=d(W,{currentCaretPosition:I,previousConformedValue:X,placeholderChar:O}),T===!1)return;var te=(0,k.processCaretTraps)(T),Z=te.maskWithoutCaretTraps,oe=te.indexes;T=Z,ee=oe,E=(0,k.convertMaskToPlaceholder)(T,O)}else T=d;var re={previousConformedValue:X,guide:z,placeholderChar:O,pipe:A,placeholder:E,currentCaretPosition:I,keepCharPositions:V},H=(0,i.default)(W,T,re),D=H.conformedValue,J=(typeof A>"u"?"undefined":x(A))===a.strFunction,$={};J&&($=A(D,w({rawValue:W},re)),$===!1?$={value:X,rejected:!0}:(0,k.isString)($)&&($={value:$}));var N=J?$.value:D,G=(0,C.default)({previousConformedValue:X,previousPlaceholder:Q,conformedValue:N,placeholder:E,rawValue:W,currentCaretPosition:I,placeholderChar:O,indexesOfPipedChars:$.indexesOfPipedChars,caretTrapIndexes:ee}),K=N===E&&G===0,S=B?E:M,ae=K?S:N;t.previousConformedValue=ae,t.previousPlaceholder=E,v.value!==ae&&(v.value=ae,g(v,G))}}}}}function g(e,t){document.activeElement===e&&(q?l(function(){return e.setSelectionRange(t,t,Y)},0):e.setSelectionRange(t,t,Y))}function h(e){if((0,k.isString)(e))return e;if((0,k.isNumber)(e))return String(e);if(e==null)return M;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(e))}Object.defineProperty(r,"__esModule",{value:!0});var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var m in o)Object.prototype.hasOwnProperty.call(o,m)&&(e[m]=o[m])}return e},x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.default=p;var b=n(4),C=s(b),_=n(3),i=s(_),k=n(2),a=n(1),M="",Y="none",P="object",q=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),l=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout},function(c,r){function n(p){return function(){return p}}var s=function(){};s.thatReturns=n,s.thatReturnsFalse=n(!1),s.thatReturnsTrue=n(!0),s.thatReturnsNull=n(null),s.thatReturnsThis=function(){return this},s.thatReturnsArgument=function(p){return p},c.exports=s},function(c,r,n){function s(p,g,h,w,x,b,C,_){if(!p){var i;if(g===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[h,w,x,b,C,_],a=0;i=new Error(g.replace(/%s/g,function(){return k[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}c.exports=s},function(c,r,n){var s=n(6),p=n(7),g=n(10);c.exports=function(){function h(b,C,_,i,k,a){a!==g&&p(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function w(){return h}h.isRequired=h;var x={array:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:w,element:h,instanceOf:w,node:h,objectOf:w,oneOf:w,oneOfType:w,shape:w,exact:w};return x.checkPropTypes=s,x.PropTypes=x,x}},function(c,r,n){c.exports=n(8)()},function(c,r){var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";c.exports=n},function(c,r){c.exports=j}])})})(de);var Me=de.exports;const Ee=me(Me),Pe="_form_1ajdo_1",Ne="_formGroup_1ajdo_11",Se="_textField_1ajdo_25",Ve="_checkbox_1ajdo_40",Ie="_btn_1ajdo_57",F={form:Pe,formGroup:Ne,textField:Se,checkbox:Ve,btn:Ie},$e=({onSubmit:y,initialState:f,onCancel:j})=>{const{state:c,handleChange:r,handleSubmit:n}=ke({initialState:f,onSubmit:y}),{title:s,director:p,favorite:g,genre:h,releaseDate:w}=c,x=[/\d/,/\d/,/\d/,/\d/],b=C=>{C.preventDefault(),j&&j()};return u.jsxs("form",{onSubmit:n,className:F.form,encType:"multipart/form-data",children:[u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie title"}),u.jsx("input",{value:s||"",name:"title",onChange:r,className:F.textField,placeholder:"Movie title",required:!0})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie director"}),u.jsx("input",{value:p||"",name:"director",onChange:r,className:F.textField,placeholder:"Movie director",required:!0})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Favorite"}),u.jsx("input",{checked:!!g,name:"favorite",onChange:r,className:F.checkbox,type:"checkbox"})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie genre"}),u.jsxs("select",{name:"genre",value:h||"fantastic",onChange:r,className:F.textField,children:[u.jsx("option",{value:"fantastic",children:"Fantastic"}),u.jsx("option",{value:"love story",children:"Love story"})]})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Movie release date"}),u.jsx(Ee,{mask:x,value:w||"",name:"releaseDate",onChange:r,className:F.textField,placeholder:"YYYY",required:!0})]}),u.jsxs("div",{className:F.formGroup,children:[u.jsx("label",{children:"Poster"}),u.jsx("input",{name:"poster",type:"file",onChange:r})]}),u.jsx("button",{className:F.btn,onClick:b,children:"Cancel"}),u.jsx("button",{className:F.btn,type:"submit",children:"Edit Movie"})]})},Qe=({movie:y,className:f})=>{const[j,c]=ne.useState(!1),r=ye(),n=()=>c(!0),s=()=>c(!1),p=g=>{r(ge({id:y._id,data:g})),s()};return u.jsxs("div",{children:[u.jsx("button",{className:f,onClick:n,children:"Edit"}),j&&u.jsx(Oe,{close:s,title:"Edit Movie",content:u.jsx($e,{initialState:{title:y.title,director:y.director,favorite:y.favorite,genre:y.genre,releaseDate:y.releaseDate,poster:null},onSubmit:p,onCancel:s})})]})},We="/my-movies-frontend/assets/sprite-718573d4.svg",Ae="_modal_62xv9_1",Be="_modalContent_62xv9_14",Fe="_close_62xv9_31",se={modal:Ae,modalContent:Be,close:Fe},Xe=({isOpen:y,trailerUrl:f,errorMessage:j,onClose:c})=>y?u.jsx("div",{className:se.modal,children:u.jsxs("div",{className:se.modalContent,children:[u.jsx("button",{className:se.close,onClick:c,children:"×"}),j?u.jsx("p",{className:se.error,children:j}):u.jsx("iframe",{width:"560",height:"315",src:f,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Trailer"})]})}):null,fe="https://api.themoviedb.org/3",pe="ba520957137ad46ba4502dabb5237445",Re=async y=>{try{const f=await ce.get(`${fe}/search/movie?api_key=${pe}&query=${encodeURIComponent(y)}&page=1`);if(f.data.results.length===0)throw new Error("No movies found for the provided query");return f.data.results[0]}catch(f){throw console.error("Error fetching movie by name:",f),f}},De=async y=>{try{const j=(await ce.get(`${fe}/movie/${y}/videos?api_key=${pe}`)).data.results.filter(c=>c.type==="Trailer"&&c.site==="YouTube");if(j.length>0)return j[0];throw new Error("Trailer not found")}catch(f){throw console.error("Error fetching movie trailer:",f),f}},qe=async y=>{try{const f=await Re(y);console.log(`Found movie: ${f.title} (ID: ${f.id})`);const j=await De(f.id);return console.log(`Found trailer: ${j.name} (Key: ${j.key})`),`https://www.youtube.com/embed/${j.key}`}catch(f){throw console.error("Error finding and playing trailer:",f),f}},Ze=()=>{const[y,f]=ne.useState(!1),[j,c]=ne.useState(""),[r,n]=ne.useState("");return{isModalOpen:y,currentTrailerUrl:j,errorMessage:r,playTrailer:async g=>{try{const h=await qe(g);c(h),n(""),f(!0)}catch(h){n(h.message||"An unexpected error occurred."),c(""),f(!0)}},closeModal:()=>{f(!1),c(""),n("")}}},Ue=({movies:y})=>y.items,He=be([Ue],y=>y.filter(({favorite:f})=>f));export{Qe as E,Ee as M,Xe as T,Ye as a,He as b,Ue as g,We as i,F as s,Ze as u};
